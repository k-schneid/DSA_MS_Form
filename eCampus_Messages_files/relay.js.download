define(["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery"],function(a){var b,c={},d=1,e=function(a){var b=a.split("/");return[b[0],b[2]].join("//")},f=function(a){var b,f,g=document.getElementById("xchannelhook"),h="commChannel_"+d;if(g||(f=document.createElement("div"),f.id="xchannelhook",document.body.appendChild(f),g=f),b=e(a),!c[b]){var i=a+"?from="+e(k.location.href);f=document.createElement("iframe"),c[b]=d,f.name=h,f.style.position="absolute",f.style.left="-1000px",f.id=h,f.src=i,g.appendChild(f)}return h},g=null,h=null,i=1,j=null,k=this,l=!1,m="postMessage",n="addEventListener",o=k[m]&&!a.browser.opera&&!a.browser.msie;return{hasPostMessage:o,createCommChannel:f,postMessage:function(a,b,d){b&&(d=d||parent,o?d[m](a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):b&&(h=a+":::"+i++ +":::"+e(k.location.href),d.name=h,setTimeout(function(){var a=document.getElementById("commChannel_"+c[b]);if(a){var d=parseInt(a.style.width,10);a.style.width=d&&0!==d?d+1+"px":"100px"}},15)))},receiveMessage:b=function(c,d,e){o?(c&&(j&&b(),j=function(b){return"string"==typeof d&&b.origin!==d||a.isFunction(d)&&d(b.origin)===l?l:(c(b),void 0)}),k[n]?k[c?n:"removeEventListener"]("message",j,l):k[c?"attachEvent":"detachEvent"]("onmessage",j)):(g&&(clearInterval(g),g=null),k.name="",c?(e="number"==typeof d?d:"number"==typeof e?e:200,g=setInterval(function(){var a=k.name;""!==a&&a!==h&&(h=a,k.name="",c({data:a.split(":::")[0],origin:a.split(":::")[2]}))},200)):alert("no callback!!!"))}}});
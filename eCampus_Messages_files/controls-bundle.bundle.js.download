define("pets-client-chat/1.10.0/public/javascript/chatapi", ["pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/externalevent"],function(a,b,c,d){function e(){return N}function f(c){var d,e,f=c.indexOf(Q),g={name:c,displayName:c,type:P.Course,teamName:null,classId:null};return c===b.MY_FRIENDS_GROUP_NAME?g.type=P.Personal:f>0&&(e=c.substring(0,f),f=c.indexOf(R),g.type=P.LearningTeam,d=c.substring(f+1).slice(0,-1).split(S),g.teamName=d[0],g.classId=d[1],e+=" - "+g.teamName,g.displayName=a.truncate(25,e,"...")),g}function g(a,b){var c=b;return a&&a.length>0&&(c=a+"|"+c),c.replace(/\//g,"~").replace(/ /g,"_").replace(/\(/g,"{").replace(/:/g,"=").replace(/\)/g,"}").toLowerCase()}function h(a){return a.replace(/(^.*\|)|(@.*$)/g,"").replace(/\{/g,"(").replace(/=/g,":").replace(/\}/g,")").replace(/_/g," ").replace(/~/g,"/").replace(/(.*\/)*\b\w/g,function(a){return a.toUpperCase()})}function i(a){return c.trace("Pets-Client-Core::ChatApi::connectRequested"),d.subscribe(O.ConnectRequested,a)}function j(a){return c.trace("Pets-Client-Core::ChatApi::disconnectRequested"),d.subscribe(O.DisconnectRequested,a)}function k(a){return c.trace("Pets-Client-Core::ChatApi::rosterRequested"),d.subscribe(O.RosterRequested,a)}function l(a){return c.trace("Pets-Client-Core::ChatApi::connectionChanged"),d.subscribe(O.ConnectionChanged,a)}function m(a){d.unsubscribe(O.ConnectionChanged,a)}function n(a){return c.trace("Pets-Client-Core::ChatApi::userJoinedMuc"),d.subscribe(O.UserJoinedMuc,a)}function o(a){return c.trace("Pets-Client-Core::ChatApi::CreateChat"),d.subscribe(O.CreateChat,a)}function p(a){return c.trace("Pets-Client-Core::ChatApi::CreateMuc"),d.subscribe(O.CreateMuc,a)}function q(a){return c.trace("Pets-Client-Core::ChatApi::CreateNamedMuc"),d.subscribe(O.CreateNamedMuc,a)}function r(a){return c.trace("Pets-Client-Core::ChatApi::AddUsersToMuc"),d.subscribe(O.AddUsersToMuc,a)}function s(a){return c.trace("Pets-Client-Core::ChatApi::LeaveMuc"),d.subscribe(O.LeaveMuc,a)}function t(a){return c.trace("Pets-Client-Core::ChatApi::roomRequested"),d.subscribe(O.MucRoomRequested,a)}function u(a){return c.trace("Pets-Client-Core::ChatApi::roomCreated"),d.subscribe(O.MucRoomCreated,a)}function v(a){return c.trace("Pets-Client-Core::ChatApi::roomInvalidated"),d.subscribe(O.MucRoomInvalidated,a)}function w(a){return c.trace("PETs-Client-Core::ChatApi::JoinMucRoom"),d.subscribe(O.JoinMucRoom,a)}function x(a){return c.trace("Pets-Client-Core::ChatApi::unreadMessageCountChanged"),d.subscribe(O.UnreadMessageCountChanged,a)}function y(){c.trace("Pets-Client-Core::ChatApi::postConnectRequested"),d.publish(O.ConnectRequested)}function z(a){c.trace("Pets-Client-Core::ChatApi::postDisconnectRequested"),d.publish(O.DisconnectRequested,{connectionErrorCondition:a})}function A(){c.trace("Pets-Client-Core::ChatApi::postRosterRequested"),d.publish(O.RosterRequested)}function B(a,b,e,f,g){c.trace("Pets-Client-Core::ChatApi::postConnectionChanged"),N=b,d.publish(O.ConnectionChanged,{jid:a,statusCode:b,statusCodeText:e,errorCondition:f,errorConditionText:g})}function C(a){c.trace("Pets-Client-Core::ChatApi::postUserJoinedMuc"),d.publish(O.UserJoinedMuc,{room:a})}function D(a){c.trace("Pets-Client-Core::ChatApi::createChat"),d.publish(O.CreateChat,{participants:a})}function E(a){c.trace("Pets-Client-Core::ChatApi::createMuc"),d.publish(O.CreateMuc,{participants:a})}function F(a,b,e){c.trace("Pets-Client-Core::ChatApi::createNamedMuc"),d.publish(O.CreateNamedMuc,{namespace:a,name:b,participants:e})}function G(a,b){c.trace("Pets-Client-Core::ChatApi::addUsersToMuc"),d.publish(O.AddUsersToMuc,{room:a,participants:b})}function H(a){c.trace("Pets-Client-Core::ChatApi::leaveMuc"),d.publish(O.LeaveMuc,{room:a})}function I(){c.trace("Pets-Client-Core::ChatApi::postMucRoomRequested"),d.publish(O.MucRoomRequested)}function J(a){c.trace("Pets-Client-Core::ChatApi::postMucRoomCreated"),d.publish(O.MucRoomCreated,{room:a})}function K(a){c.trace("Pets-Client-Core::ChatApi::postMucRoomInvalidated"),d.publish(O.MucRoomInvalidated,{room:a})}function L(a){c.trace("PETs-Client-Core::ChatApi::postJoinMucRoom"),d.publish(O.JoinMucRoom,{room:a})}function M(a){c.trace("Pets-Client-Core::ChatApi::postUnreadMessageCountChanged"),d.publish(O.UnreadMessageCountChanged,{unreadMessageCount:a})}c.trace("Pets-Client-Core::ChatApi::ctor");var N,O={ConnectRequested:"edu.apollogrp.pln.pets.core.chatapi.connectrequested",DisconnectRequested:"edu.apollogrp.pln.pets.core.chatapi.disconnectrequested",RosterRequested:"edu.apollogrp.pln.pets.core.chatapi.rosterrequested",ConnectionChanged:"edu.apollogrp.pln.pets.core.chatapi.connectionchanged",UserJoinedMuc:"edu.apollogrp.pln.pets.core.chatapi.userjoinedmuc",CreateChat:"edu.apollogrp.pln.pets.core.chatapi.createchat",CreateMuc:"edu.apollogrp.pln.pets.core.chatapi.createmuc",CreateNamedMuc:"edu.apollogrp.pln.pets.core.chatapi.createnamedmuc",AddUsersToMuc:"edu.apollogrp.pln.pets.core.chatapi.adduserstomuc",LeaveMuc:"edu.apollogrp.pln.pets.core.chatapi.leavemuc",MucRoomRequested:"edu.apollogrp.pln.pets.core.chatapi.mucroomrequested",MucRoomCreated:"edu.apollogrp.pln.pets.core.chatapi.mucroomcreated",MucRoomInvalidated:"edu.apollogrp.pln.pets.core.chatapi.mucroominvalidated",JoinMucRoom:"edu.apollogrp.pln.pets.core.chatapi.joinmucroom",UnreadMessageCountChanged:"edu.apollogrp.pln.pets.core.chatapi.unreadmessagecountchanged"},P={Personal:"Personal",LearningTeam:"LearningTeam",Course:"Course"},Q=" - Team (",R="(",S=":";return{GroupTypes:P,jidify:g,dejidify:h,getContactGroupInfo:f,getConnectionStatus:e,connectRequested:i,disconnectRequested:j,rosterRequested:k,connectionChanged:l,unsubscribeConnectionChanged:m,userJoinedMuc:n,createChat:o,createMuc:p,createNamedMuc:q,addUsersToMuc:r,leaveMuc:s,mucRoomRequested:t,mucRoomCreated:u,mucRoomInvalidated:v,joinMucRoom:w,unreadMessageCountChanged:x,postConnectRequested:y,postDisconnectRequested:z,postRosterRequested:A,postConnectionChanged:B,postUserJoinedMuc:C,postCreateChat:D,postCreateMuc:E,postCreateNamedMuc:F,postAddUsersToMuc:G,postLeaveMuc:H,postMucRoomRequested:I,postMucRoomCreated:J,postMucRoomInvalidated:K,postJoinMucRoom:L,postUnreadMessageCountChanged:M}});

define("pets-client-chat/1.10.0/public/javascript/chatcache", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/cacheproxy"],function(a,b,c){function d(b,d){a.trace("Pets-Client-Chat::chatCache::setMessageHistory"),c.getCache(j.MessageHistory+b,k).set(d)}function e(b,d){a.trace("Pets-Client-Chat::chatCache::getMessageHistory"),c.getCache(j.MessageHistory+b,k).snapshot(d)}function f(b,d){a.trace("Pets-Client-Chat::chatCache::setMessageBoxText"),c.getCache(j.MessageBoxText+b).set(d)}function g(b,d){a.trace("Pets-Client-Chat::chatCache::getMessageHistory"),c.getCache(j.MessageBoxText+b).snapshot(d)}function h(b,d){a.trace("Pets-Client-Chat::chatCache::setChatSessions"),c.getCache(j.ChatSessions+b,k).set(d)}function i(b,d){a.trace("Pets-Client-Chat::chatCache::getChatSessions"),c.getCache(j.ChatSessions+b,k).snapshot(d)}a.trace("Pets-Client-Chat::ChatCache::ctor");var j={MessageHistory:"chatcache.messagehistory.",MessageBoxText:"chatcache.messageboxtext.",ChatSessions:"chatcache.chatsessions."},k={area:"localStorage",durationHours:24};return{setMessageHistories:d,getMessageHistories:e,setMessageBoxText:f,getMessageBoxText:g,setChatSessions:h,getChatSessions:i}});

define("pets-client-chat/1.10.0/public/javascript/chatconfig", [],{dateTimeFormatSpecifier:"h:mm:ss TT x:MM/dd/yyyy;",selfIdentifier:"Me",roomIdentifer:"Room",idleTimeoutMs:9e5});

define("pets-client-chat/1.10.0/public/javascript/chatsoundenum", [],{NewMessage:0});

define("pets-client-chat/1.10.0/public/javascript/chatstateenum", [],{Gone:0,Inactive:1,Active:2,Composing:3,Paused:4});

define("pets-client-chat/1.10.0/public/javascript/chattypeenum", [],{OneOnOne:"chat",Muc:"groupchat"});

define("pets-client-chat/1.10.0/public/javascript/connectionerrorconditionenum", [],{Unknown:-1,Conflict:0,UserUnknown:1,None:2});

define("pets-client-chat/1.10.0/public/javascript/connectionstatusenum", [],{Unknown:-1,Connecting:0,ConnectionFailed:1,Authenticating:2,AuthenticationFailed:3,Connected:4,Disconnected:5,Disconnecting:6,Attached:7,Error:8});

define("pets-client-chat/1.10.0/public/javascript/contactsapi", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/externalevent"],function(a,b){function c(c){return a.trace("Pets-Client-Core::ContactsApi::contactsReceived"),b.subscribe(m.ContactsReceived,c)}function d(c){return a.trace("Pets-Client-Core::ContactsApi::contactsAdded"),b.subscribe(m.ContactAdded,c)}function e(c){return a.trace("Pets-Client-Core::ContactsApi::contactUpdated"),b.subscribe(m.ContactUpdated,c)}function f(c){return a.trace("Pets-Client-Core::ContactsApi::contactRemoved"),b.subscribe(m.ContactRemoved,c)}function g(c){return a.trace("Pets-Client-Core::ContactsApi::contactChanged"),b.subscribe(m.ContactChanged,c)}function h(c,d){a.trace("Pets-Client-Core::ContactsApi::postContactsReceived"),b.publish(m.ContactsReceived,{contacts:c,contactGroups:d})}function i(c,d,e){a.trace("Pets-Client-Core::ContactsApi::postContactAdded"),b.publish(m.ContactAdded,{jid:c,contacts:d,contactGroups:e})}function j(c,d,e){a.trace("Pets-Client-Core::ContactsApi::postContactUpdated"),b.publish(m.ContactUpdated,{jid:c,contacts:d,contactGroups:e})}function k(c){a.trace("Pets-Client-Core::ContactsApi::postContactRemoved"),b.publish(m.ContactRemoved,{jid:c})}function l(c,d,e,f){a.trace("Pets-Client-Core::ContactsApi::postContactChanged"),b.publish(m.ContactChanged,{jid:c,name:d,avatarUrl:e,groups:f})}a.trace("Pets-Client-Core::ContactEvents::ctor");var m={ContactsReceived:"edu.apollogrp.pln.pets.core.contactsapi.contactsreceived",ContactAdded:"edu.apollogrp.pln.pets.core.contactsapi.contactadded",ContactUpdated:"edu.apollogrp.pln.pets.core.contactsapi.contactupdated",ContactRemoved:"edu.apollogrp.pln.pets.core.contactsapi.contactremoved",ContactChanged:"edu.apollogrp.pln.pets.core.contactsapi.contactchanged"};return{contactsReceived:c,contactAdded:d,contactUpdated:e,contactRemoved:f,contactChanged:g,postContactsReceived:h,postContactAdded:i,postContactUpdated:j,postContactRemoved:k,postContactChanged:l}});

define("pets-client-chat/1.10.0/public/javascript/contactsinfocache", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/cacheproxy"],function(a,b){function c(c,d){a.trace("PETs-Client-Chat::ContactsInfoCache::get"),b.getCache(e.ContactsInfo+c).snapshot(d)}function d(c,d){a.trace("PETs-Client-Chat::ContactsInfoCache::set"),b.getCache(e.ContactsInfo+c).set(d)}a.trace("PETs-Client-Chat::ContactsInfoCache::ctor");var e={ContactsInfo:"contactsinfocache.contactsinfo."};return{get:c,set:d}});

define("pets-client-chat/1.10.0/public/javascript/contactsinfochangedenum", [],{ContactInfo:0,Presence:1,MucPresence:2,ChatState:3,MucChatState:4});

define("pets-client-chat/1.10.0/public/javascript/messagingapi", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/externalevent"],function(a,b){function c(c){return a.trace("Pets-Client-Core::MessagingApi::sendMessage"),b.subscribe(k.SendMessage,c)}function d(c){return a.trace("Pets-Client-Core::MessagingApi::messageSent"),b.subscribe(k.MessageSent,c)}function e(c){return a.trace("Pets-Client-Core::MessagingApi::messageReceived"),b.subscribe(k.MessageReceived,c)}function f(c){return a.trace("Pets-Client-Core::MessagingApi::mucMessageReceived"),b.subscribe(k.MucMessageReceived,c)}function g(c,d,e,f){a.trace("Pets-Client-Core::MessagingApi::postSendMessage"),b.publish(k.SendMessage,{id:c,body:e,html:f,address:d})}function h(c){a.trace("Pets-Client-Core::MessagingApi::postMessageSent"),b.publish(k.MessageSent,{id:c})}function i(c,d,e,f){a.trace("Pets-Client-Core::MessagingApi::postMessageReceived"),b.publish(k.MessageReceived,{from:c,body:d,sentDateTime:e,isHistoric:f})}function j(c,d,e,f,g){a.trace("Pets-Client-Core::MessagingApi::postMucMessageReceived"),b.publish(k.MucMessageReceived,{room:c,from:d,body:e,sentDateTime:f,isHistoric:g})}a.trace("Pets-Client-Core::MessagingApi::ctor");var k={SendMessage:"edu.apollogrp.pln.pets.core.messagingapi.sendmessage",MessageSent:"edu.apollogrp.pln.pets.core.messagingapi.messagesent",MessageReceived:"edu.apollogrp.pln.pets.core.messagingapi.messagereceived",MucMessageReceived:"edu.apollogrp.pln.pets.core.messagingapi.mucmessagereceived"};return{sendMessage:c,messageSent:d,messageReceived:e,mucMessageReceived:f,postSendMessage:g,postMessageSent:h,postMessageReceived:i,postMucMessageReceived:j}});

define("pets-client-chat/1.10.0/public/javascript/preferencecache", ["ncf-thirdparty/json-2/public/javascript/json","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-core/2.6.0/public/javascript/userinfo"],function(a,b,c,d,e){function f(a){b.trace("Pets-Client-Chat::preferenceCache::getPreferences"),d.getCache(h.chatPreferences+e.getPetsId()).snapshot(a)}function g(a){b.trace("Pets-Client-Chat::preferenceCache::setPreferences"),d.getCache(h.chatPreferences+e.getPetsId()).set(a)}b.trace("Pets-Client-Chat::preferenceCache::ctor");var h={chatPreferences:"chatpreferences.options."};return{getPreferences:f,setPreferences:g}});

define("pets-client-chat/1.10.0/public/javascript/presenceapi", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/externalevent"],function(a,b,c){function d(b){return a.trace("Pets-Client-Core::PresenceApi::selfPresenceChanged"),c.subscribe(v.SelfPresenceChanged,b)}function e(b){return a.trace("Pets-Client-Core::PresenceApi::presenceChanged"),c.subscribe(v.PresenceChanged,b)}function f(b){return a.trace("Pets-Client-Core::PresenceApi::presenceChangeRequested"),c.subscribe(v.PresenceChangeRequested,b)}function g(b){return a.trace("Pets-Client-Core::PresenceApi::mucPresenceChanged"),c.subscribe(v.MucPresenceChanged,b)}function h(b){return a.trace("Pets-Client-Core::PresenceApi::mucPresenceChangeRequested"),c.subscribe(v.MucPresenceChangeRequested,b)}function i(b){return a.trace("Pets-Client-Core::PresenceApi::stateChanged"),c.subscribe(v.StateChanged,b)}function j(b){return a.trace("Pets-Client-Core::PresenceApi::stateChangeRequested"),c.subscribe(v.StateChangeRequested,b)}function k(b){return a.trace("Pets-Client-Core::PresenceApi::mucStateChanged"),c.subscribe(v.MucStateChanged,b)}function l(b){return a.trace("Pets-Client-Core::PresenceApi::mucStateChangeRequested"),c.subscribe(v.MucStateChangeRequested,b)}function m(b,d,e,f){a.trace("Pets-Client-Core::PresenceApi::postPresenceChanged"),c.publish(v.PresenceChanged,{from:b,presence:d,presenceText:e,status:f})}function n(b,d,e,f){a.trace("Pets-Client-Core::PresenceApi::postSelfPresenceChanged"),c.publish(v.SelfPresenceChanged,{from:b,presence:d,presenceText:e,status:f})}function o(b,d,e){a.trace("Pets-Client-Core::PresenceApi::postPresenceChangeRequested"),c.publish(v.PresenceChangeRequested,{presence:b,address:d,status:e})}function p(b,d,e,f,g,h){a.trace("Pets-Client-Core::PresenceApi::postMuchPresenceChanged"),c.publish(v.MucPresenceChanged,{room:b,from:d,presence:e,presenceText:f,name:g,status:h})}function q(b,d,e){a.trace("Pets-Client-Core::PresenceApi::postMucPresenceChangeRequested"),c.publish(v.MucPresenceChangeRequested,{room:b,jid:d,presence:e})}function r(b,d,e){a.trace("Pets-Client-Core::PresenceApi::postStateChanged"),c.publish(v.StateChanged,{jid:b,state:d,stateText:e})}function s(b,d){a.trace("Pets-Client-Core::PresenceApi::postStateChangeRequested"),c.publish(v.StateChangeRequested,{state:b,address:d})}function t(b,d,e,f){a.trace("Pets-Client-Core::PresenceApi::postMucStateChanged"),c.publish(v.MucStateChanged,{room:b,jid:d,state:e,stateText:f})}function u(b,d,e){a.trace("Pets-Client-Core::PresenceApi::postMucStateChangeRequested"),c.publish(v.MucStateChangeRequested,{room:b,jid:d,state:e})}a.trace("Pets-Client-Core::PresenceApi::ctor");var v={SelfPresenceChanged:"edu.apollogrp.pln.pets.core.presenceapi.selfpresencechanged",PresenceChanged:"edu.apollogrp.pln.pets.core.presenceapi.presencechanged",PresenceChangeRequested:"edu.apollogrp.pln.pets.core.presenceapi.presencechangerequested",MucPresenceChanged:"edu.apollogrp.pln.pets.core.presenceapi.mucpresencechanged",MucPresenceChangeRequested:"edu.apollogrp.pln.pets.core.presenceapi.mucpresencechangerequested",StateChanged:"edu.apollogrp.pln.pets.core.presenceapi.statechanged",StateChangeRequested:"edu.apollogrp.pln.pets.core.presenceapi.statechangerequested",MucStateChanged:"edu.apollogrp.pln.pets.core.presenceapi.mucstatechanged",MucStateChangeRequested:"edu.apollogrp.pln.pets.core.presenceapi.mucstatechangerequested"};return{selfPresenceChanged:d,presenceChanged:e,presenceChangeRequested:f,mucPresenceChanged:g,mucPresenceChangeRequested:h,stateChanged:i,stateChangeRequested:j,mucStateChanged:k,mucStateChangeRequested:l,postSelfPresenceChanged:n,postPresenceChanged:m,postPresenceChangeRequested:o,postMucPresenceChanged:p,postMucPresenceChangeRequested:q,postStateChanged:r,postStateChangeRequested:s,postMucStateChanged:t,postMucStateChangeRequested:u}});

define("pets-client-chat/1.10.0/public/javascript/presenceenum", [],{Unknown:-1,Offline:0,ExtendedAway:2,Away:3,DoNotDisturb:4,Available:5});

define("pets-client-chat/1.10.0/public/javascript/statusmessagewidgetfactory", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase"],function(a,b,c,d){function e(){var a;g=this,this.windowCreated(function(){a=g.getControl(h.statusMessageControlId),a.setOpenerWindow(g),a.render(null,function(){g.get$ClientAreaRootElement().find("#"+h.statusMessageHeaderId).removeClass("aes-hide")}),a.focusAfter(f)})}function f(){g.get$ClientAreaRootElement().find("#"+h.statusMessageHeaderId).focus()}c.trace("PETs-Client-Core::StatusMessageWidgetFactory::ctor");var g,h={statusMessageHeaderId:"aes-contacts-statusmessage-header",statusMessageControlId:"aes-pets-contacts-statusmessagecontrol"};return{create:function(a,b){c.trace("PETs-Client-Core::StatusMessageWidgetFactory::create");var f=d.extend(e,arguments,a,b);return f.load(),f}}});

define('pets-client-chat/1.10.0/public/partials/contacts/statusmessagecontrol.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partials/contacts/statusmessagecontrol.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-status-input-wrapper\"><label for=\"aes-status-input\" class=\"aes-pets-sr-only\">Your Status Message:</label><textarea id=\"aes-status-input\" placeholder=\"What's going on...\">").reference(ctx.get("message"),ctx,"h").write("</textarea></div><div class=\"aes-form-buttons\"><button class=\"aes-submit\">Update</button><button class=\"aes-cancel\">Cancel</button><span><span id=\"aes-status-input-count\"></span> characters remaining</span></div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partials/contacts/statusmessagecontrol.template' };
});
require(['pets-client-chat/1.10.0/public/partials/contacts/statusmessagecontrol.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chat.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chat.template",body_0);function body_0(chk, ctx){return chk.write("<section id=\"aes-chat-chatmessagearea\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/chatmessageareacontrol\"data-widget-options=\"height=auto;width=auto;resizeToParentClientArea=true\"></section><section id=\"aes-chat-contact-invitation-list\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactinvitationlistcontrol\"data-widget-options=\"height=257;width=auto;resizeToParentClientArea=true;isVisible=false\"></section>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chat.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chat.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chatmessage.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatmessage.template",body_0);function body_0(chk, ctx){return chk.write("<section class=\"aes-pets-chat-message").exists(ctx.get("fromRoom"),ctx,{"else":body_1,"block":body_3},null).write("\"").notexists(ctx.get("isMultiple"),ctx,{"block":body_5},null).write(">").notexists(ctx.get("fromRoom"),ctx,{"block":body_6},null).write("<span>").exists(ctx.get("presence"),ctx,{"else":body_7,"block":body_14},null).write("</span>").notexists(ctx.get("fromRoom"),ctx,{"block":body_18},null).write("</section>");}function body_1(chk, ctx){return chk.exists(ctx.get("priorMessageFromRoom"),ctx,{"block":body_2},null);}function body_2(chk, ctx){return chk.write(" aes-pets-chat-section-header");}function body_3(chk, ctx){return chk.write(" aes-pets-chat-notification").notexists(ctx.get("priorMessageFromRoom"),ctx,{"block":body_4},null);}function body_4(chk, ctx){return chk.write(" aes-pets-chat-section-header");}function body_5(chk, ctx){return chk.write("role=\"log\" aria-live=\"polite\" aria-atomic=\"true\" aria-relevant=\"additions\"");}function body_6(chk, ctx){return chk.write("<div class=\"aes-pets-chat-from\">").reference(ctx.get("name"),ctx,"h").write(":</div>");}function body_7(chk, ctx){return chk.exists(ctx.get("msgType"),ctx,{"else":body_8,"block":body_9},null);}function body_8(chk, ctx){return chk.reference(ctx.get("body"),ctx,"h",["s"]);}function body_9(chk, ctx){return chk.helper("if",ctx,{"block":body_10},{"cond":body_11}).helper("if",ctx,{"block":body_12},{"cond":body_13});}function body_10(chk, ctx){return chk.reference(ctx.get("name"),ctx,"h").write(" has joined the conversation.");}function body_11(chk, ctx){return chk.write("'").reference(ctx.get("msgType"),ctx,"h").write("' == 'muc_incoming'");}function body_12(chk, ctx){return chk.reference(ctx.get("name"),ctx,"h").write(" has left the conversation.");}function body_13(chk, ctx){return chk.write("'").reference(ctx.get("msgType"),ctx,"h").write("' == 'muc_outgoing'");}function body_14(chk, ctx){return chk.reference(ctx.get("name"),ctx,"h").write(" ").helper("if",ctx,{"else":body_15,"block":body_16},{"cond":body_17});}function body_15(chk, ctx){return chk.write("has logged in.");}function body_16(chk, ctx){return chk.write("has gone offline and cannot receive messages.");}function body_17(chk, ctx){return chk.reference(ctx.get("presence"),ctx,"h").write(" == 0");}function body_18(chk, ctx){return chk.write("<div class=\"aes-pets-chat-date\">Sent at ").reference(ctx.get("formattedSentDateTime"),ctx,"h").write("</div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatmessage.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chatmessage.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chattab.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattab.template",body_0);function body_0(chk, ctx){return chk.section(ctx.get("chatTabs"),ctx,{"block":body_1},null).write("<li id=\"aes-pets-chat-addtab\" class=\"").exists(ctx.get("addTabSelected"),ctx,{"block":body_14},null).write("\" data-address=\"__addTab\"><a href=\"javascript:void(0)\" class=\"aes-pets-icon-button aes-add aes-chat-tab-link\" role=\"button\" title=\"Click to invite contacts into a group chat\"><img class=\"aes-pets-icon aes-add\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"start group chat\" /></a></li>");}function body_1(chk, ctx){return chk.write("<li data-address=\"").reference(ctx.get("address"),ctx,"h").write("\" class=\"").exists(ctx.get("selected"),ctx,{"block":body_2},null).helper("if",ctx,{"block":body_3},{"cond":body_4}).write("\"><a href=\"javascript:void(0)\" class=\"aes-chat-tab-link\" role=\"button\" title=\"").reference(ctx.get("label"),ctx,"h").write("\"><img src=\"").helper("if",ctx,{"else":body_5,"block":body_8},{"cond":body_10}).write("\" width=\"25\" height=\"25\" alt=\"conversation with ").reference(ctx.get("label"),ctx,"h").write("\" />").helper("if",ctx,{"block":body_11},{"cond":body_12}).exists(ctx.get("presence"),ctx,{"block":body_13},null).write("</a></li>");}function body_2(chk, ctx){return chk.write("aes-selected");}function body_3(chk, ctx){return chk.write(" aes-pets-chat-unread");}function body_4(chk, ctx){return chk.reference(ctx.get("unreadMessageCount"),ctx,"h").write(" > 0");}function body_5(chk, ctx){return chk.exists(ctx.get("avatarUrl"),ctx,{"else":body_6,"block":body_7},null);}function body_6(chk, ctx){return chk.write("/te/pets-client-core/2.6.0/public/img/avatar-default.png");}function body_7(chk, ctx){return chk.reference(ctx.get("avatarUrl"),ctx,"h");}function body_8(chk, ctx){return chk.write("/te/pets-client-core/2.6.0/public/img/group-avatar-").helper("idx",ctx,{"block":body_9},null).write(".png");}function body_9(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h");}function body_10(chk, ctx){return chk.write("'").reference(ctx.get("type"),ctx,"h").write("' == 'groupchat'");}function body_11(chk, ctx){return chk.write("<span class=\"aes-pets-sr-only\">conversation with ").reference(ctx.get("label"),ctx,"h").write(" has unread messages</span>");}function body_12(chk, ctx){return chk.reference(ctx.get("unreadMessageCount"),ctx,"h").write(" > 0");}function body_13(chk, ctx){return chk.write("<div class=\"aes-presence aes-presence-").reference(ctx.get("presence"),ctx,"h").write("\"></div>");}function body_14(chk, ctx){return chk.write("aes-selected");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattab.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chattab.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chattabscontrol.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattabscontrol.template",body_0);function body_0(chk, ctx){return chk.write("<ul id=\"aes-chat-tabsection\" aria-live=\"polite\" aria-atomic=\"true\" aria-relevant=\"additions\" data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/chattabscontrol\" data-widget-options=\"resizeToParentClientArea=false\"></ul>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattabscontrol.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chattabscontrol.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-pets-progress\">").exists(ctx.get("typingNotifications"),ctx,{"block":body_1},null).write("</div>");}function body_1(chk, ctx){return chk.section(ctx.get("typingNotifications"),ctx,{"block":body_2},null).helper("if",ctx,{"else":body_11,"block":body_12},{"cond":body_13}).write(" typing...");}function body_2(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h").helper("if",ctx,{"else":body_3,"block":body_5},{"cond":body_7}).helper("idx",ctx,{"block":body_8},null);}function body_3(chk, ctx){return chk.helper("sep",ctx,{"block":body_4},null);}function body_4(chk, ctx){return chk.write(" ");}function body_5(chk, ctx){return chk.helper("sep",ctx,{"block":body_6},null);}function body_6(chk, ctx){return chk.write(", ");}function body_7(chk, ctx){return chk.write("'").reference(ctx.get("typingNotifications"),ctx,"h").write("'.split(',').length > 2");}function body_8(chk, ctx){return chk.helper("if",ctx,{"block":body_9},{"cond":body_10});}function body_9(chk, ctx){return chk.write("and ");}function body_10(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h").write(" == '").reference(ctx.get("typingNotifications"),ctx,"h").write("'.split(',').length - 2");}function body_11(chk, ctx){return chk.write(" are");}function body_12(chk, ctx){return chk.write(" is");}function body_13(chk, ctx){return chk.write("'").reference(ctx.get("typingNotifications"),ctx,"h").write("'.split(',').length == 1");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chatwindowheadercontrols.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatwindowheadercontrols.template",body_0);function body_0(chk, ctx){return chk.write("<h1 id=\"aes-window-caption-").reference(ctx.get("id"),ctx,"h").write("\"></h1><ul id=\"aes-window-header-toolspace-").reference(ctx.get("id"),ctx,"h").write("\"><li id=\"aes-chat-group-button\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/groupbuttoncontrol\"data-widget-options=\"resizeToParentClientArea=false;windowCssClasses=aes-pets-text\"></li><li id=\"aes-chat-invite-button\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/invitebuttoncontrol\"data-widget-options=\"resizeToParentClientArea=false;windowCssClasses=aes-pets-text\"></li><li id=\"aes-window-header-minimize-").reference(ctx.get("id"),ctx,"h").write("\"><button class=\"aes-pets-icon-button aes-minimize-light\" tabindex=\"0\" title=\"Minimize\"><img class=\"aes-pets-icon aes-minimize-light\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"minimize window\" /></button></li><li id=\"aes-window-header-close-").reference(ctx.get("id"),ctx,"h").write("\"><button class=\"aes-pets-icon-button aes-close-light\" tabindex=\"0\" title=\"Close\"><img class=\"aes-pets-icon aes-close-light\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"close window\" /></button></li></ul>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatwindowheadercontrols.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chatwindowheadercontrols.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/groupbuttoncontrol.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/groupbuttoncontrol.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-selection-header\" role=\"button\" aria-haspopup=\"true\" tabindex=\"0\"><div id=\"aes-groupname-div\"><div class=\"aes-chat-invite-button-link\"></div></div></div><section id=\"aes-group-chat-users-list\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/groupchatuserslistcontrol\"data-widget-options=\"height=auto;width=305;isModal=true;isModalSelection=false;resizeToParentClientArea=true\"></section>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/groupbuttoncontrol.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/groupbuttoncontrol.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/groupchatuserslist.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/groupchatuserslist.template",body_0);function body_0(chk, ctx){return chk.write("<div id=\"group-chat-users-list\" class=\"aes-contacts\"><div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-list\" class=\"aes-list\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactlistcontrol\"data-widget-options=\"isVisible=false;resizeToParentClientArea=false\"></div></div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/groupchatuserslist.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/groupchatuserslist.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.template",body_0);function body_0(chk, ctx){return chk.write("<section class=\"aes-form-buttons aes-invitation-buttons\">").helper("if",ctx,{"else":body_1,"block":body_2},{"cond":body_3}).write("<button class=\"aes-cancel\">Cancel</button></section>");}function body_1(chk, ctx){return chk.write("<button class=\"aes-disabled\">Done</button>");}function body_2(chk, ctx){return chk.write("<button class=\"aes-submit\">Done</button>");}function body_3(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/invitebuttoncontrol.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/invitebuttoncontrol.template",body_0);function body_0(chk, ctx){return chk.write("<button class=\"aes-chat-invite-button-link\" tabindex=\"0\">Invite</button>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/invitebuttoncontrol.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/invitebuttoncontrol.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/availablegroupitem.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegroupitem.template",body_0);function body_0(chk, ctx){return chk.helper("if",ctx,{"block":body_1},{"cond":body_10});}function body_1(chk, ctx){return chk.write("<li class=\"aes-group").helper("if",ctx,{"block":body_2},{"cond":body_3}).exists(ctx.getPath(true,["searchFilteredOut"]),ctx,{"block":body_4},null).exists(ctx.getPath(true,["groupFilteredOut"]),ctx,{"block":body_5},null).write("\"data-address=\"").reference(ctx.get("availableContacts"),ctx,"h").write("\"><img src=\"/te/pets-client-core/2.6.0/public/img/group-avatar-").helper("idx",ctx,{"block":body_6},null).write(".png\" width=\"25\" height=\"25\" alt=\"\" /><h2>").reference(ctx.get("name"),ctx,"h").write("</h2><p>").reference(ctx.get("availableContactCount"),ctx,"h").write(" ").helper("if",ctx,{"else":body_7,"block":body_8},{"cond":body_9}).write(" online</p></li>");}function body_2(chk, ctx){return chk.write(" aes-group-clickable");}function body_3(chk, ctx){return chk.write("'").reference(ctx.getPath(false,["options","clickOnlyWhenAvailable"]),ctx,"h").write("' != 'true' || ").reference(ctx.get("availableContactCount"),ctx,"h").write(" > 0");}function body_4(chk, ctx){return chk.write(" aes-hide");}function body_5(chk, ctx){return chk.write(" aes-hide");}function body_6(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h");}function body_7(chk, ctx){return chk.write("people");}function body_8(chk, ctx){return chk.write("person");}function body_9(chk, ctx){return chk.write("'").reference(ctx.get("availableContactCount"),ctx,"h").write("' == '1'");}function body_10(chk, ctx){return chk.write("'").reference(ctx.get("type"),ctx,"h").write("' == 'Course'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegroupitem.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/availablegroupitem.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactfilteredlist.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactfilteredlist.template",body_0);function body_0(chk, ctx){return chk.write("<header id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-filter\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactsfiltercontrol\"data-widget-options=\"resizeToParentClientArea=false;isVisible=false\"></header><div class=\"aes-list\"><section id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-list\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactlistcontrol\"data-widget-options=\"resizeToParentClientArea=false\"></section><div class=\"aes-list-footer\"></div></div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactfilteredlist.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactfilteredlist.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactgroups.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactgroups.template",body_0);function body_0(chk, ctx){return chk.write("<li class=\"aes-contact-group-option\" data-address=\"*\" role=\"menuitem\" tabindex=\"-1\">All Contacts</li>").section(ctx.getPath(true,["contactGroups"]),ctx,{"block":body_1},null);}function body_1(chk, ctx){return chk.write("<li class=\"aes-contact-group-option\" data-address=\"").reference(ctx.get("name"),ctx,"h").write("\" role=\"menuitem\" tabindex=\"-1\">").reference(ctx.get("displayName"),ctx,"h").write("</li>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactgroups.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactgroups.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.template",body_0);function body_0(chk, ctx){return chk.write("<li class=\"aes-user").helper("if",ctx,{"block":body_1},{"cond":body_2}).helper("if",ctx,{"block":body_3},{"cond":body_4}).write("\" data-address=\"").reference(ctx.get("jid"),ctx,"h").write("\">").helper("if",ctx,{"block":body_5},{"cond":body_14}).write("<img src=\"").exists(ctx.get("avatarUrl"),ctx,{"else":body_15,"block":body_16},null).write("\" width=\"25\" height=\"25\" alt=\"\" /><div class=\"aes-user-info").exists(ctx.get("addFriend"),ctx,{"block":body_17},null).helper("if",ctx,{"block":body_18},{"cond":body_19}).write("\"><div class=\"aes-presence").helper("if",ctx,{"block":body_20},{"cond":body_21}).write("\">").helper("if",ctx,{"block":body_22},{"cond":body_23}).write("</div><h2>").exists(ctx.get("searchFilterMatchText"),ctx,{"else":body_24,"block":body_25},null).write("</h2>").helper("if",ctx,{"block":body_26},{"cond":body_27}).write("<div class=\"aes-user-links\">").helper("if",ctx,{"else":body_28,"block":body_39},{"cond":body_42}).write("</div></div>").helper("if",ctx,{"block":body_43},{"cond":body_52}).write("</li>");}function body_1(chk, ctx){return chk.write(" select-only");}function body_2(chk, ctx){return chk.write("'").reference(ctx.get("selectOnly"),ctx,"h").write("' == 'true'");}function body_3(chk, ctx){return chk.write(" aes-user-disabled");}function body_4(chk, ctx){return chk.write("('").reference(ctx.get("clickOnlyWhenAvailable"),ctx,"h").write("' == 'true' && ").reference(ctx.getPath(false,["presence","current"]),ctx,"h").write(" <= 0) || '").reference(ctx.get("isConnected"),ctx,"h").write("' != 'true' || '").reference(ctx.get("invitationFilteredOut"),ctx,"h").write("' == 'true'");}function body_5(chk, ctx){return chk.write("<div class=\"user-select\">").helper("if",ctx,{"block":body_6},{"cond":body_13}).write("</div>");}function body_6(chk, ctx){return chk.helper("if",ctx,{"block":body_7},{"cond":body_12});}function body_7(chk, ctx){return chk.write("<label for=\"").reference(ctx.get("id"),ctx,"h").write("-user-select-").helper("idx",ctx,{"block":body_8},null).write("\" class=\"aes-pets-sr-only\">Invite ").reference(ctx.get("name"),ctx,"h").write(" into chat</label><input id=\"").reference(ctx.get("id"),ctx,"h").write("-user-select-").helper("idx",ctx,{"block":body_9},null).write("\" class=\"user-select\" type=\"checkbox\" ").helper("if",ctx,{"block":body_10},{"cond":body_11}).write("/>");}function body_8(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h");}function body_9(chk, ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h");}function body_10(chk, ctx){return chk.write("checked=\"true\"");}function body_11(chk, ctx){return chk.write("'").reference(ctx.get("selected"),ctx,"h").write("' == 'true'");}function body_12(chk, ctx){return chk.write("'").reference(ctx.get("invitationFilteredOut"),ctx,"h").write("' != 'true'");}function body_13(chk, ctx){return chk.write("'").reference(ctx.get("selectOnlyWhenAvailable"),ctx,"h").write("' != 'true' || ('").reference(ctx.get("isConnected"),ctx,"h").write("' == 'true' && ").reference(ctx.getPath(false,["presence","current"]),ctx,"h").write(" > 0)");}function body_14(chk, ctx){return chk.write("'").reference(ctx.get("selectOnly"),ctx,"h").write("' == 'true'");}function body_15(chk, ctx){return chk.write("/te/pets-client-core/2.6.0/public/img/avatar-default.png");}function body_16(chk, ctx){return chk.reference(ctx.get("avatarUrl"),ctx,"h");}function body_17(chk, ctx){return chk.write(" aes-user-friendable");}function body_18(chk, ctx){return chk.write(" aes-user-has-options");}function body_19(chk, ctx){return chk.write("'").reference(ctx.get("clickOnlyWhenAvailable"),ctx,"h").write("' != 'true' || ('").reference(ctx.get("isConnected"),ctx,"h").write("' == 'true' && ").reference(ctx.getPath(false,["presence","current"]),ctx,"h").write(" > 0) || '").reference(ctx.get("profileEnabled"),ctx,"h").write("' == 'true'");}function body_20(chk, ctx){return chk.write(" aes-presence-").reference(ctx.getPath(false,["presence","current"]),ctx,"h");}function body_21(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("'");}function body_22(chk, ctx){return chk.write("<span class=\"aes-pets-sr-only\">").reference(ctx.getPath(false,["presenceText","current"]),ctx,"h").write("</span>");}function body_23(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("'");}function body_24(chk, ctx){return chk.reference(ctx.get("name"),ctx,"h");}function body_25(chk, ctx){return chk.reference(ctx.get("searchFilterMatchPreText"),ctx,"h").write("<span class=\"aes-search-match\">").reference(ctx.get("searchFilterMatchText"),ctx,"h").write("</span>").reference(ctx.get("searchFilterMatchPostText"),ctx,"h");}function body_26(chk, ctx){return chk.write("<p class=\"aes-user-presence-text\">").reference(ctx.get("status"),ctx,"h").write("</p>");}function body_27(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("' && '").reference(ctx.get("statusMessage"),ctx,"h").write("' != ''");}function body_28(chk, ctx){return chk.helper("if",ctx,{"block":body_29},{"cond":body_38});}function body_29(chk, ctx){return chk.write("<ul>").helper("if",ctx,{"block":body_30},{"cond":body_33}).section(ctx.get("contactGroups"),ctx,{"block":body_34},null).exists(ctx.get("profileEnabled"),ctx,{"block":body_37},null).write("</ul>");}function body_30(chk, ctx){return chk.write("<li class=\"aes-user-presence-text\">").reference(ctx.getPath(false,["presenceText","current"]),ctx,"h").write("</li>").helper("if",ctx,{"block":body_31},{"cond":body_32});}function body_31(chk, ctx){return chk.write("<li class=\"aes-start-chat\"><a href=\"javascript:void(0)\">Chat<span class=\"aes-pets-sr-only\">&nbsp;with ").reference(ctx.get("name"),ctx,"h").write("</span></a></li>");}function body_32(chk, ctx){return chk.reference(ctx.getPath(false,["presence","current"]),ctx,"h").write(" > 0");}function body_33(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("'");}function body_34(chk, ctx){return chk.helper("if",ctx,{"block":body_35},{"cond":body_36});}function body_35(chk, ctx){return chk.write("<!--<li class=\"aes-start-chat\"><a class=\"aes-team\" data-address=\"").reference(ctx.get("name"),ctx,"h").write("\">").reference(ctx.get("name"),ctx,"h").write("</a></li>-->");}function body_36(chk, ctx){return chk.write("'").reference(ctx.get("type"),ctx,"h").write("' == '").reference(ctx.get("groupTypeEnumLearningTeam"),ctx,"h").write("'");}function body_37(chk, ctx){return chk.write("<li><a href=\"").reference(ctx.get("profileUrl"),ctx,"h").write("\" class=\"aes-profile\">Profile<span class=\"aes-pets-sr-only\">&nbsp;for ").reference(ctx.get("name"),ctx,"h").write("</span></a></li>");}function body_38(chk, ctx){return chk.write("'").reference(ctx.get("clickOnlyWhenAvailable"),ctx,"h").write("' != 'true' || ").reference(ctx.getPath(false,["presence","current"]),ctx,"h").write(" > 0 || '").reference(ctx.get("profileEnabled"),ctx,"h").write("' == 'true'");}function body_39(chk, ctx){return chk.write("<ul>").helper("if",ctx,{"block":body_40},{"cond":body_41}).write("</ul>");}function body_40(chk, ctx){return chk.write("<li class=\"aes-user-presence-text\">").reference(ctx.getPath(false,["presenceText","current"]),ctx,"h").write("</li>");}function body_41(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("'");}function body_42(chk, ctx){return chk.write("'").reference(ctx.get("selectOnly"),ctx,"h").write("' == 'true'");}function body_43(chk, ctx){return chk.exists(ctx.get("isConnected"),ctx,{"block":body_44},null);}function body_44(chk, ctx){return chk.exists(ctx.get("addFriend"),ctx,{"block":body_45},null);}function body_45(chk, ctx){return chk.exists(ctx.get("friendshipStatusEnumPending"),ctx,{"block":body_46},null);}function body_46(chk, ctx){return chk.helper("if",ctx,{"block":body_47},{"cond":body_51});}function body_47(chk, ctx){return chk.helper("if",ctx,{"else":body_48,"block":body_49},{"cond":body_50});}function body_48(chk, ctx){return chk.write("<button class=\"aes-pets-icon-button aes-add-friend\" title=\"Send Friend Request\"><img class=\"aes-pets-icon aes-add-friend\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"send friend request to ").reference(ctx.get("name"),ctx,"h").write("\" /></button>");}function body_49(chk, ctx){return chk.write("<div class=\"aes-pets-icon aes-added-friend\" title=\"Friend Request Pending\"><span class=\"aes-pets-sr-only\">Friend request has been sent to ").reference(ctx.get("name"),ctx,"h").write("</span></div>");}function body_50(chk, ctx){return chk.write("'").reference(ctx.get("friendshipStatus"),ctx,"h").write("' === '").reference(ctx.get("friendshipStatusEnumPending"),ctx,"h").write("'");}function body_51(chk, ctx){return chk.write("'").reference(ctx.get("friendshipStatus"),ctx,"h").write("' !== '").reference(ctx.get("friendshipStatusEnumApproved"),ctx,"h").write("'");}function body_52(chk, ctx){return chk.write("'").reference(ctx.get("selectOnly"),ctx,"h").write("' != 'true'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfilter.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfilter.template",body_0);function body_0(chk, ctx){return chk.write("<!-- start:contactsFilter --><div class=\"aes-search-contact\"><label for=\"").reference(ctx.get("id"),ctx,"h").write("-aes-search-contact-input\">Search Contacts</label><input id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-search-contact-input\" type=\"text\" placeholder=\"Search Contacts\" /><button class=\"aes-pets-icon-button aes-close\" title=\"Click to clear search text\"><img class=\"aes-pets-icon aes-close\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"clear search\" /></button></div><section class=\"aes-group-module\"><div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-group-selection\" role=\"menubar\" class=\"aes-selection\" style=\"position:absolute;\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/groupselectioncontrol\"data-widget-options=\"resizeToParentClientArea=false;escapeToCollapse=true\"></div><button class=\"aes-pets-icon-button aes-search\" title=\"Click to enter search text\"><img class=\"aes-pets-icon aes-search\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"search\" /></button></section><!-- end:contactsFilter -->");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfilter.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfilter.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfooter.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfooter.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-footer-inner\"><input type=\"submit\" class=\"aes-group-chat\" value=\"N/A\" /><ul><li><button class=\"aes-pets-icon-button aes-preferences\" aria-expanded=\"false\" aria-controls=\"aes-dock-chat-preferences-flyout\" title=\"Click to change your contacts view preferences\"><img class=\"aes-pets-icon aes-preferences\" src=\"/te/pets-client-core/2.6.0/public/img/empty.png\" alt=\"preferences\" /></button><form id=\"aes-dock-chat-preferences-flyout\" class=\"aes-flyout\"><div class=\"aes-checkbox\" style=\"margin-top:0;\"><input type=\"checkbox\" name=\"soundOn\" id=\"soundOn\" value=\"yes\"").exists(ctx.getPath(true,["isSoundOn"]),ctx,{"block":body_1},null).write("/><label for=\"soundOn\">Play new message sound</label></div></form></li></ul></div>");}function body_1(chk, ctx){return chk.write(" checked=\"checked\"");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfooter.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfooter.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactwidget.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactwidget.template",body_0);function body_0(chk, ctx){return chk.helper("if",ctx,{"block":body_1},{"cond":body_8}).helper("if",ctx,{"block":body_9},{"cond":body_19});}function body_1(chk, ctx){return chk.helper("if",ctx,{"block":body_2},{"cond":body_7});}function body_2(chk, ctx){return chk.section(ctx.getPath(true,[]),ctx,{"block":body_3},{"pending":ctx.getPath(false,["friendshipStatusEnum","Pending"])});}function body_3(chk, ctx){return chk.helper("select",ctx,{"block":body_4},{"key":ctx.get("friendshipStatus")}).write(">");}function body_4(chk, ctx){return chk.helper("eq",ctx,{"block":body_5},{"value":ctx.get("pending")}).helper("default",ctx,{"block":body_6},null);}function body_5(chk, ctx){return chk.write("<a role=\"button\" class=\"aes-pets-contacts-button aes-user-friendrequested\" title=\"Friend request pending\"><span class=\"aes-pets-contacts-icon-friend\"></span></a>");}function body_6(chk, ctx){return chk.write("<a role=\"button\" class=\"aes-pets-contacts-button aes-user-friendrequest\" title=\"Send friend request\"><span class=\"aes-pets-contacts-icon-friend\"></span></a>");}function body_7(chk, ctx){return chk.write("'").reference(ctx.get("friendshipStatus"),ctx,"h").write("' != '").reference(ctx.getPath(false,["friendshipStatusEnum","Approved"]),ctx,"h").write("'");}function body_8(chk, ctx){return chk.write("'").reference(ctx.get("displayFriending"),ctx,"h").write("' == 'true'");}function body_9(chk, ctx){return chk.helper("if",ctx,{"else":body_10,"block":body_11},{"cond":body_18});}function body_10(chk, ctx){return chk.write("<a role=\"button\" class=\"aes-disabled aes-pets-contacts-button\" title=\"You must be online to chat\"><span class=\"aes-pets-contacts-icon-chat\"></span></a>");}function body_11(chk, ctx){return chk.write("<a role=\"button\" class=\"aes-pets-contacts-button").section(ctx.getPath(true,[]),ctx,{"block":body_12},{"available":ctx.getPath(false,["presenceEnum","Available"]),"away":ctx.getPath(false,["presenceEnum","Away"]),"offline":ctx.getPath(false,["presenceEnum","Offline"])}).write("</a>");}function body_12(chk, ctx){return chk.helper("select",ctx,{"block":body_13},{"key":ctx.getPath(false,["presence","current"])});}function body_13(chk, ctx){return chk.helper("eq",ctx,{"block":body_14},{"value":ctx.get("available")}).helper("eq",ctx,{"block":body_15},{"value":ctx.get("away")}).helper("eq",ctx,{"block":body_16},{"value":ctx.get("offline")}).helper("default",ctx,{"block":body_17},null);}function body_14(chk, ctx){return chk.write(" aes-user-chatrequest\" title=\"Chat\"><span class=\"aes-pets-contacts-icon-chat\"></span><span class=\"aes-pets-contacts-presence aes-user-online\"></span>");}function body_15(chk, ctx){return chk.write(" aes-user-chatrequest\" title=\"Chat\"><span class=\"aes-pets-contacts-icon-chat\"></span><span class=\"aes-pets-contacts-presence aes-user-away\"></span>");}function body_16(chk, ctx){return chk.write("\" title=\"").reference(ctx.get("name"),ctx,"h").write(" is offline\"><span class=\"aes-pets-contacts-icon-chat\"></span><span class=\"aes-pets-contacts-presence aes-user-offline\"></span>");}function body_17(chk, ctx){return chk.write(" aes-disabled\" title=\"Must be current classmates or friends to chat\"><span class=\"aes-pets-contacts-icon-chat\"></span>");}function body_18(chk, ctx){return chk.write("'").reference(ctx.get("isConnected"),ctx,"h").write("' == 'true'");}function body_19(chk, ctx){return chk.write("'").reference(ctx.get("displayChat"),ctx,"h").write("' == 'true'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactwidget.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactwidget.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-contacts-message aes-contacts-message-error\">").block(ctx.getBlock("error"),ctx,{"block":body_1},null).write("</div>");}function body_1(chk, ctx){return chk;}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-selection-header\" role=\"button\" aria-haspopup=\"true\" tabindex=\"0\"><div class=\"aes-pets-icon aes-down\">").reference(ctx.getPath(true,["groupFilterDisplayText"]),ctx,"h").write("</div></div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/message.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/message.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-contacts-message aes-contacts-message-info\">").exists(ctx.get("isSetOffline"),ctx,{"block":body_1},null).write("</div>");}function body_1(chk, ctx){return chk.write("<p><a id=\"aes-contacts-message-action\" href=\"javascript:void(0)\" data-address=\"connect\">Go online</a> to see who's online to chat.</p>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/message.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/message.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.template",body_0);function body_0(chk, ctx){return chk.write("<div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-presence-header\" class=\"aes-selection-header\" role=\"button\" aria-haspopup=\"true\" tabindex=\"0\"><div class=\"aes-pets-icon aes-down\">").helper("if",ctx,{"else":body_1,"block":body_2},{"cond":body_3}).write("</div></div>");}function body_1(chk, ctx){return chk.write("<span class=\"aes-presence aes-presence-").reference(ctx.getPath(false,["presenceEnum","Offline"]),ctx,"h").write("\" />Offline");}function body_2(chk, ctx){return chk.write("<span class=\"aes-presence aes-presence-").reference(ctx.getPath(false,["presenceEnum","Available"]),ctx,"h").write("\" />Online");}function body_3(chk, ctx){return chk.write("'").reference(ctx.get("userPresence"),ctx,"h").write("' == '").reference(ctx.getPath(false,["presenceEnum","Available"]),ctx,"h").write("'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionoptions.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionoptions.template",body_0);function body_0(chk, ctx){return chk.exists(ctx.get("userPresence"),ctx,{"block":body_1},null);}function body_1(chk, ctx){return chk.write("<li data-address=\"").helper("if",ctx,{"else":body_2,"block":body_3},{"cond":body_4}).write("\" role=\"menuitem\" tabindex=\"-1\"><div class=\"aes-presence aes-presence-").reference(ctx.getPath(false,["presenceEnum","Available"]),ctx,"h").write("\" />Online</li><li data-address=\"").helper("if",ctx,{"else":body_5,"block":body_6},{"cond":body_7}).write("\" role=\"menuitem\" tabindex=\"-1\"><div class=\"aes-presence aes-presence-").reference(ctx.getPath(false,["presenceEnum","Offline"]),ctx,"h").write("\" />Offline</li>");}function body_2(chk, ctx){return chk.reference(ctx.getPath(false,["presenceEnum","Available"]),ctx,"h");}function body_3(chk, ctx){return chk.reference(ctx.getPath(false,["presenceEnum","Unknown"]),ctx,"h");}function body_4(chk, ctx){return chk.write("'").reference(ctx.get("userPresence"),ctx,"h").write("' == '").reference(ctx.getPath(false,["presenceEnum","Available"]),ctx,"h").write("'");}function body_5(chk, ctx){return chk.reference(ctx.getPath(false,["presenceEnum","Offline"]),ctx,"h");}function body_6(chk, ctx){return chk.reference(ctx.getPath(false,["presenceEnum","Unknown"]),ctx,"h");}function body_7(chk, ctx){return chk.write("'").reference(ctx.get("userPresence"),ctx,"h").write("' == '").reference(ctx.getPath(false,["presenceEnum","Offline"]),ctx,"h").write("'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionoptions.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionoptions.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/searchpeoplebutton.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/searchpeoplebutton.template",body_0);var blocks={'searchpeoplelink':body_2,'searchpeopletitle':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partials/contacts/searchpeoplebutton.html",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("Find contacts on PhoenixConnect");}function body_2(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.reference(ctx.getPath(false,["config","jive","searchUrl"]),ctx,"h");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/searchpeoplebutton.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/searchpeoplebutton.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/chatsessions", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/internalevent","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/chattypeenum","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/chatcache"],function(a,b,c,d,e,f,g,h,i){function j(){c.trace("Pets-Client-Chat::ChatSessions::onConnectRequested"),B=!1}function k(a,b){c.trace("PETs-Client-Chat::ChatSessions::onConnectionChanged"),B||b.statusCode!==f.Attached&&b.statusCode!==f.Connected||l()}function l(a){c.trace("PETs-Client-Chat::ChatSessions::loadCache"),i.getChatSessions(z,function(c){b.isUndefinedOrNull(c)||b.isUndefinedOrNull(c.items)||(D=c),D.items.sort(function(a,b){return a.order-b.order}),D.items.length>0&&(C=D.items[D.items.length-1].order),B=!0,A||(A=!0,e.publish(y.CachedDataLoaded,{chatSessions:D},!0)),b.doCallback(a)})}function m(a){B?b.doCallback(a):l(a)}function n(a){return c.trace("PETs-Client-Chat::ChatSessions::exists"),b.searchObjectArray(D.items,"address",a)>-1}function o(a){c.trace("PETs-Client-Chat::ChatSessions::add");var d=b.searchObjectArray(D.items,"address",a.address);-1===d?D.items.push(a):D.items[d]=a,i.setChatSessions(z,D)}function p(a){c.trace("PETs-Client-Chat::ChatSessions::remove");var d=b.searchObjectArray(D.items,"address",a);d>-1&&(D.items.splice(d,1),i.setChatSessions(z,D))}function q(a){c.trace("PETs-Client-Chat::ChatSessions::update");var d=b.searchObjectArray(D.items,"address",a.address);d>-1&&(D.items[d]=a,i.setChatSessions(z,D))}function r(a){return c.trace("PETs-Client-Chat::ChatSessions::get"),b.isUndefinedOrNull(a)?D.items:b.getObjectFromObjectArray(D.items,"address",a)}function s(){c.trace("PETs-Client-Chat::ChatSessions::getMucCount");for(var a=0,b=0,d=D.items.length;d>b;b++)D.items[b].type===g.Muc&&a++;return a}function t(){var b=0;return a.each(D.items,function(a,c){b+=c.unreadMessageCount}),b}function u(){return D.lastViewedAddress}function v(a){D.lastViewedAddress=a,i.setChatSessions(z,D)}function w(a,d,e,f,g,h,i,j,k){return c.trace("PETs-Client-Chat::ChatSessions::createChatSession"),{order:C++,isVisible:!0,label:a,address:d,type:e,groupNumber:f,participantInfos:b.isUndefinedOrNull(g)?[]:g,typingNotifications:b.isUndefinedOrNull(h)?[]:h,unreadMessageCount:b.isUndefinedOrNull(i)?0:i,unsentMessageText:b.isUndefinedOrNull(j)?"":j,lastMessageSentDateTime:b.isUndefinedOrNull(k)?null:k}}function x(a){return e.subscribe(y.CachedDataLoaded,a)}c.trace("PETs-Client-Chat::ChatSessions::ctor");var y={CachedDataLoaded:"edu.apollogrp.pln.pets.chat.chatsessions.cacheddataloaded"},z=d.getPetsId(),A=!1,B=!1,C=0,D={items:[],lastViewedAddress:null};return h.connectRequested(j),h.getConnectionStatus()===f.Attached||h.getConnectionStatus()===f.Connected?l():h.connectionChanged(k),{ensureLoaded:m,exists:n,add:o,remove:p,update:q,get:r,getMucCount:s,getUnreadMessageCount:t,getLastViewedAddress:u,setLastViewedAddress:v,createChatSession:w,cachedDataLoaded:x}});

define("pets-client-chat/1.10.0/public/javascript/messagehistories", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/internalevent","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/chatcache"],function(a,b,c,d,e,f,g,h){function i(){c.trace("Pets-Client-Chat::ChatSessions::onConnectRequested"),t=!1}function j(a,b){c.trace("PETs-Client-Chat::MessageHistories::onConnectionChanged"),t||b.statusCode!==f.Attached&&b.statusCode!==f.Connected||k()}function k(d){c.trace("PETs-Client-Chat::MessageHistories::loadCache"),h.getMessageHistories(r,function(c){!b.isUndefinedOrNull(c)&&a.isArray(c)&&(u=c),t=!0,s||(s=!0,e.publish(q.CachedDataLoaded,{messageHistories:u},!0)),b.doCallback(d)})}function l(a){t?b.doCallback(a):k(a)}function m(a,d){c.trace("PETs-Client-Chat::MessageHistories::add");var e=b.getObjectFromObjectArray(u,"address",a);b.isUndefinedOrNull(e)&&(e={address:a,messages:[]},u.push(e)),e.messages.push(d),h.setMessageHistories(r,u)}function n(a){c.trace("PETs-Client-Chat::MessageHistories::remove");var d=b.searchObjectArray(u,"address",a);d>-1&&(u.splice(d,1),h.setMessageHistories(r,u))}function o(a){return c.trace("PETs-Client-Chat::MessageHistories::get"),b.isUndefinedOrNull(a)?u:b.getObjectFromObjectArray(u,"address",a)}function p(a){return c.trace("PETs-Client-Chat::MessageHistories::cachedDataLoaded"),e.subscribe(q.CachedDataLoaded,a)}c.trace("PETs-Client-Chat::MessageHistories::ctor");var q={CachedDataLoaded:"edu.apollogrp.pln.pets.chat.messagehistories.cacheddataloaded"},r=d.getPetsId(),s=!1,t=!1,u=[];return g.connectRequested(i),g.getConnectionStatus()===f.Attached||g.getConnectionStatus()===f.Connected?k():g.connectionChanged(j),{ensureLoaded:l,add:m,remove:n,get:o,cachedDataLoaded:p}});

define("pets-client-chat/1.10.0/public/javascript/preferences", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/utility","pets-client-chat/1.10.0/public/javascript/preferencecache"],function(a,b,c,d,e,f){function g(a){e.isUndefinedOrNull(j[a.preferenceName])||(j[a.preferenceName]=a.preferenceValue),f.setPreferences(j),c.savePreferences(a)}function h(a){return j[a]}function i(){f.getPreferences(function(a){!e.isUndefinedOrNull(a)&&a.hasOwnProperty("playSound")?(k=!0,j=a):c.getPreferences(function(a){e.isUndefinedOrNull(a)||(k=!0,j=a,f.setPreferences(j))})})}b.trace("PETs-Client-Chat::Preferences::ctor");var j={},k=!1;return i(),{get:h,set:g,isLoaded:function(){return k}}});

define("pets-client-chat/1.10.0/public/javascript/contactsinfo", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/externalevent","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-core/2.6.0/public/javascript/petsconfig!pets","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/connectionerrorconditionenum","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/chatstateenum","pets-client-chat/1.10.0/public/javascript/contactsinfochangedenum","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/presenceapi","pets-client-chat/1.10.0/public/javascript/contactsapi","pets-client-chat/1.10.0/public/javascript/contactsinfocache"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a,d){c.trace("PETs-Client-Chat::ContactsInfo::onConnectionChanged"),c.debug("PETs-Client-Chat::contactsInfo::onConnectionChanged","${nl}Topic:"+a,d),_=d.statusCode,ab=d.errorCondition,b.isUndefinedOrNull(Y)&&_===i.Attached&&K(),O($,_,d.errorCondition)}function s(a,d){c.trace("PETs-Client-Chat::contactsInfo::onContactsReceived"),c.debug("PETs-Client-Chat::contactsInfo::onContactsReceived","${nl}Topic:"+a,d);var e=b.isUndefinedOrNull(Y);Y=R(d.contacts,d.contactGroups,!0),q.set($,Y),e?M(Y):N(d.jid,m.ContactInfo),Q(),z()}function t(d,e){function g(a,c){for(var d,e=!1,f=0,g=c.length;g>f;f++)d=b.searchObjectArray(Y.contactGroups,"name",c[f]),-1===d&&(Y.contactGroups.push(U(a,c[f])),e=!0);return e}function i(b,c){var d=!1;return b.length!==c.length?d=!0:a.each(b,function(b,e){return-1==a.inArray(e,c)?(d=!0,!1):void 0}),d}c.trace("PETs-Client-Chat::contactsInfo::onContactsReceived"),c.debug("PETs-Client-Chat::contactsInfo::onContactChanged","${nl}Topic:"+d,e);var j=b.getObjectFromObjectArray(Y.contacts,"jid",e.jid),k=!1;b.isUndefinedOrNull(j)?(j=T({jid:e.jid,name:e.name,avatarUrl:e.avatarUrl,groups:e.groups},null,null,!0),g(j.jid,e.groups),Y.contacts.push(j),k=!0,q.set($,Y)):(k=!b.isUndefinedOrNull(e.name)&&b.setPropertyValue(j,"name",e.name)||k,k=!b.isUndefinedOrNull(e.avatarUrl)&&b.setPropertyValue(j,"avatarUrl",e.avatarUrl)||k,b.isUndefinedOrNull(e.groups)||(a.inArray(h.MY_FRIENDS_GROUP_NAME,j.groups)>=0?-1===a.inArray(h.MY_FRIENDS_GROUP_NAME,e.groups)&&(j.friendshipStatus=f.friendshipStatusEnum.NotFriends,k=!0):a.inArray(h.MY_FRIENDS_GROUP_NAME,e.groups)>=0&&(j.friendshipStatus=f.friendshipStatusEnum.Approved,k=!0),k=k||i(j.groups,e.groups),j.groups=e.groups.slice(0),k=g(j.jid,e.groups)||k),k&&q.set($,Y)),k&&N(e.jid,m.ContactInfo)}function u(a,c){var d=b.searchObjectArray(Y.contacts,"jid",c.jid);d>-1&&(Y.contacts.splice(d,1),q.set($,Y),N(c.jid,m.ContactInfo))}function v(a,d){c.trace("PETs-Client-Chat::contactsInfo::onPresenceChanged"),c.debug("PETs-Client-Chat::contactsInfo::onPresenceChanged","${nl}Topic:"+a,d),b.isUndefinedOrNull(Y)||_!==i.Connected&&_!==i.Attached?(c.debug("PETs-Client-Chat::contactsInfo::onpresenceChanged","Status: "+_.toString()+" | User is offline; queueing presence update..."),bb.push(d)):P(d)}function w(a,d){c.trace("PETs-Client-Chat::contactsInfo::onMucPresenceChanged"),c.debug("PETs-Client-Chat::contactsInfo::onMucPresenceChanged","${nl}Topic:"+a,d);var e=b.getObjectFromObjectArray(Y,"jid",d.room);b.isUndefinedOrNull(e)||(d.presence===k.Offline?(delete e.mucPresence.previous[d.room],delete e.mucPresence.current[d.room],delete e.mucPresenceText.previous[d.room],delete e.mucPresenceText.current[d.room]):(e.mucPresence.previous[d.room]=e.mucPresence.current[d.room],e.mucPresence.current[d.room]=d.presence,e.mucPresenceText.previous[d.room]=e.mucPresenceText.current[d.room],e.mucPresenceText.current[d.room]=d.presenceText),W(e,d.status),b.isUndefinedOrNull(e.name)&&(e.name=d.name)),q.set($,Y),N(d.jid,m.MucPresence)}function x(a,d){c.trace("PETs-Client-Chat::contactsInfo::onStateChanged"),c.debug("PETs-Client-Chat::contactsInfo::onStateChanged","${nl}Topic:"+a,d);var e=b.getObjectFromObjectArray(Y,"jid",d.from);b.isUndefinedOrNull(e)||(e.state.previous=e.state.current,e.state.current=d.state,e.stateText.previous=e.stateText.current,e.stateText.current=d.stateText,q.set($,Y),N(d.from,m.ChatState))}function y(a,d){c.trace("PETs-Client-Chat::contactsInfo::onMucStateChanged"),c.debug("PETs-Client-Chat::contactsInfo::onMucStateChanged","${nl}Topic:"+a,d);var e=b.getObjectFromObjectArray(Y,"jid",d.room);b.isUndefinedOrNull(e)||(d.state===l.Gone?(delete e.mucState.previous[d.room],delete e.mucState.current[d.room],delete e.mucStateText.previous[d.room],delete e.mucStateText.current[d.room]):(e.mucState.previous[d.room]=e.mucState.current[d.room],e.mucState.current[d.room]=d.state,e.mucStateText.previous[d.room]=e.mucStateText.current[d.room],e.mucStateText.current[d.room]=d.stateText),q.set($,Y),N(d.jid,m.MucChatState))}function z(){if(g.jive.enabled){var d={friendstatusrequest:{friendIdBlockList:[]}};a.each(Y.contacts,function(b,c){a.inArray(h.MY_FRIENDS_GROUP_NAME,c.groups)>=0?A(c,null,f.friendshipStatusEnum.Approved):d.friendstatusrequest.friendIdBlockList.push({friendIdBlock:{type:"PETS_ID",value:c.jid}})}),d.friendstatusrequest.friendIdBlockList.length>0&&f.getBulkFriendStatus(d,function(d){var e=null;b.isUndefinedOrNull(d.error)&&(a.each(d.friendStatuses,function(a,d){c.info("onSuccess",a+". "+d.friendStatus.friendIdBlock.value+" : "+d.friendStatus.status),e=b.getObjectFromObjectArray(Y.contacts,"jid",d.friendStatus.friendIdBlock.value),e.friendshipStatus=d.friendStatus.status}),b.isUndefinedOrNull(e)||(q.set($,Y),N(e.jid,m.ContactInfo)))})}}function A(a,c,d){a||(a=b.getObjectFromObjectArray(Y.contacts,"jid",c)),b.isUndefinedOrNull(a)||a.friendshipStatus!==d&&(a.friendshipStatus=d,q.set($,Y),N(a.jid,m.ContactInfo))}function B(a,d){c.trace("PETs-Client-Chat::contactsInfo::addFriend"),f.addFriend(a,function(c){"undefined"!=typeof c.error?A(null,a,f.friendshipStatusEnum.Error):A(null,a,c.status),b.doCallback(d)})}function C(a,d,e,f,g,h,i,j,m,n,o){c.trace("PETs-Client-Chat::contactsInfo::createContact");var p={jid:a,name:d,avatarUrl:e,groups:f,friendshipStatus:o};return V(p),b.isUndefinedOrNull(g)||(p.presence.current=g,p.presenceText.current=b.getObjPropNameByValue(k,g)),b.isUndefinedOrNull(h)||(p.mucPresence.current=h,p.mucPresenceText.current=i),b.isUndefinedOrNull(j)||(p.state.current=j,p.stateText.current=b.getObjPropNameByValue(l,j)),b.isUndefinedOrNull(m)||(p.mucState.current=m,p.mucStateText.current=n),p}function D(d){c.trace("PETs-Client-Chat::contactsInfo::getContact");var e=b.getObjectFromObjectArray(Y.contacts,"jid",d);return b.isUndefinedOrNull(e)?null:a.extend(!0,{},e)}function E(){return c.trace("PETs-Client-Chat::contactsInfo::getContacts"),a.extend(!0,{},Y.contacts)}function F(d){return c.trace("PETs-Client-Chat::contactsInfo::getContactGroup"),a.extend(!0,{},b.getObjectFromObjectArray(Y.contactGroups,"name",d))}function G(){return c.trace("PETs-Client-Chat::contactsInfo::getContactGroups"),a.extend(!0,{},Y.groups)}function H(a){c.trace("PETs-Client-Chat::contactsInfo::getContactsInfo"),b.isUndefinedOrNull(Y)?L(function(c,d){b.doCallback(a,this,S(d))}):b.doCallback(a,this,S(Y))}function I(a){return c.trace("PETs-Client-Chat::contactsInfo::contactsInfoChanged"),e.subscribe(Z.ContactsInfoChanged,a)}function J(a){return c.trace("PETs-Client-Chat::contactsInfo::connectionChanged"),e.subscribe(Z.ConnectionChanged,a)}function K(){b.isUndefinedOrNull(Y)&&q.get($,function(a){b.isUndefinedOrNull(a)?(c.warning("PETs-Client-Chat-ContactsInfo::onConnectionChanged","ContactsInfo cache is empty, requesting roster."),n.postRosterRequested()):(Y=a,M(Y),Q())})}function L(a){c.trace("PETs-Client-Chat::contactsInfo::contactsLoaded"),e.subscribe(Z.ContactsLoaded,a)}function M(a){c.trace("PETs-Client-Chat::contactsInfo::postContactsLoaded"),e.publish(Z.ContactsLoaded,S(a),!0)}function N(a,b){c.trace("PETs-Client-Chat::contactsInfo::postContactsInfoUpdated"),e.publish(Z.ContactsInfoChanged,{jid:a,contactsInfo:S(Y),contactsInfoChanged:b})}function O(a,b,d){c.trace("PETs-Client-Chat::contactsInfo::postConnectionChanged"),e.publish(Z.ConnectionChanged,{jid:a,connectionStatus:b,connectionErrorCondition:d})}function P(a){c.trace("PETs-Client-Chat::contactsInfo::processPresenceChange"),c.debug("PETs-Client-Chat::contactsInfo::processPresenceChange",null,a);var d=b.getObjectFromObjectArray(Y.contacts,"jid",a.from),e=!1;b.isUndefinedOrNull(d)||((d.presence.current!==k.Offline||d.presence.previous!==k.Unknown)&&(e=b.setPropertyValue(d.presence,"previous",d.presence.current)||e),e=b.setPropertyValue(d.presence,"current",a.presence)||e,e=b.setPropertyValue(d.presenceText,"previous",d.presenceText.current)||e,e=b.setPropertyValue(d.presenceText,"current",a.presenceText)||e,e=W(d,a.status)||e,e&&(q.set($,Y),N(a.from,m.Presence)))}function Q(){c.trace("PETS-Client-Contacts::ContactsController::processQueuedPresenceUpdates");for(var a=bb.length-1;a>=0;a--)P(bb.pop())}function R(d,e,f){c.trace("PETs-Client-Chat::contactsInfo::buildContactsInfo");var g={},h=a.extend(!0,{},d);return g.jid=$,g.contacts=a.map(d,function(a){var c=null;return b.isUndefinedOrNull(Y)||(c=b.getObjectFromObjectArray(Y.contacts,"jid",a.jid)),T(a,c,h,f)}),g.contactsDefined=a.isArray(g.contacts),g.contactGroups=e.slice(),g}function S(b){return a.extend(!0,{connectionStatus:_,connectionErrorCondition:ab},b)}function T(a,d,e,g){return c.trace("PETs-Client-Chat::contactsInfo::buildContact"),g||b.isUndefinedOrNull(d)?V(a):(a.presence=d.presence,a.presenceText=d.presenceText,a.mucPresence=d.mucPresence,a.mucPresenceText=d.mucPresenceText,a.state=d.state,a.stateText=d.stateText,a.mucState=d.mucState,a.mucStateText=d.mucStateText,W(a,d.status),a.friendshipStatus=f.friendshipStatusEnum.Unknown),a}function U(a,b){c.trace("PETs-Client-Chat::contactsInfo::buildContactGroup");var d={name:b,contacts:[a]};return d.type=n.getContactGroupType(d),d}function V(a){a.presence={},a.presence.current=k.Offline,a.presence.previous=k.Unknown,a.presenceText={},a.presenceText.current=b.getObjPropNameByValue(k,k.Offline),a.presenceText.previous=null,a.mucPresence={},a.mucPresence.current={},a.mucPresence.previous={},a.mucPresenceText={},a.mucPresenceText.current={},a.mucPresenceText.previous={},a.state={},a.state.current=l.Gone,a.state.previous=null,a.stateText={},a.stateText.current=b.getObjPropNameByValue(l,l.Gone),a.stateText.previous=null,a.mucState={},a.mucState.current={},a.mucState.previous={},a.mucStateText={},a.mucStateText.current={},a.mucStateText.previous={},W(a,null),a.friendshipStatus=f.friendshipStatusEnum.Unknown}function W(a,c){var d=!1;return b.isUndefinedOrNull(c)||(d=b.setPropertyValue(a,"statusMessage",c)||d),d=!b.isUndefinedOrNull(a.statusMessage)&&a.statusMessage.length>0?b.setPropertyValue(a,"status",a.statusMessage)||d:b.setPropertyValue(a,"status",a.presenceText.current)||d}function X(){return _}c.trace("PETs-Client-Chat::contactsinfo::ctor");var Y,Z={ContactsInfoChanged:"edu.apollogrp.pln.pets.core.contactsinfo.contactsinfochanged",ConnectionChanged:"edu.apollogrp.pln.pets.core.contactsinfo.connectionChanged",ContactsLoaded:"edu.apollogrp.pln.pets.core.contactsinfo.contactsloaded"},$=d.getPetsId(),_=i.Connecting,ab=j.None,bb=[];return p.contactChanged(t),p.contactRemoved(u),p.contactsReceived(s),o.presenceChanged(v),o.mucPresenceChanged(w),o.stateChanged(x),o.mucStateChanged(y),n.connectionChanged(r),n.getConnectionStatus()===i.Attached&&(_=i.Attached,K()),{addFriend:B,createContact:C,getContact:D,getContacts:E,getContactGroup:F,getContactGroups:G,getContactsInfo:H,getConnectionStatus:X,loadFromCache:K,contactsLoaded:L,contactsInfoChanged:I,connectionChanged:J}});

define("pets-client-chat/1.10.0/public/javascript/idlehandler", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/utility","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/presenceapi","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/chatconfig"],function(a,b,c,d,e,f,g,h){function i(a,b){l=b.statusCode,(l===e.Connected||l==e.Attached)&&(m=d.Available,k())}function j(a,b){c.isUndefinedOrNull(b.address)&&(m=b.presence)}function k(){n=setTimeout(function(){l!==e.Connected&&l!==e.Attached||m!==d.Available||((new Date).getTime()-o.getTime()>=h.idleTimeoutMs?f.postPresenceChangeRequested(d.Away):k())},h.idleTimeoutMs)}b.trace("PETs-Client-Chat::idleHandler::ctor");var l,m,n,o=new Date;g.connectionChanged(i),f.presenceChangeRequested(j),a("body").on("mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove",null,null,function(){clearTimeout(n),k(),o=new Date,l!==e.Connected&&l!==e.Attached||m!==d.Away||f.postPresenceChangeRequested(d.Available)})});

define("pets-client-chat/1.10.0/public/javascript/statusmessagecontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/presenceapi","pets-client-chat/1.10.0/public/partials/contacts/statusmessagecontrol.compiled"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){function a(c,d){b.isUndefinedOrNull(c)?k(function(b){a(b,d)}):i.replaceContentFromTemplate(s,n.template,c,function(){q(),d()})}function c(a){t._subscribeSynchronousEvent("focusBefore",a)}function d(a){t._subscribeSynchronousEvent("focusAfter",a)}function k(a){var b=e.getUsername();f.getSelfStatus(b,function(c){u=c,a({username:b,message:u})})}function l(a,c){b.isUndefinedOrNull(c.status)||p(c.status)}function o(){return s.find(n.statusTextSelector).val()}function p(a){u=b.isUndefinedOrNull(a)?o():a,s.find(n.statusTextSelector).val(u),q()}function q(){var a=o(),b=n.maximumStatusMessageCharacters-a.length;0>b&&(s.find(n.statusTextSelector).val(a.substr(0,n.maximumStatusMessageCharacters)),b=0),s.find(n.charactersRemainingSelector).text(b)}function r(){p(),t.hide(),j.postPresenceChangeRequested(null,null,u),h.publishEvent(g.StatusSet,m),t._postSynchronousEvent("focusAfter",{})}var s,t=this,u="";this.shown(function(){t.get$ClientAreaRootElement().find(n.statusTextSelector).select()}),this.windowCreated(function(){s=t.get$ClientAreaRootElement(),j.selfPresenceChanged(l),s.on("keydown",n.statusTextSelector,function(a){13===a.keyCode?(a.preventDefault(),a.stopPropagation(),r()):27===a.keyCode?p(u):q()}),s.on("click",n.submitLinkSelector,function(){r()}),s.on("keydown",n.submitLinkSelector,function(a){(13==a.which||32==a.which)&&(a.preventDefault(),a.stopPropagation(),r())}),s.on("click",n.cancelLinkSelector,function(){p(u),t.hide(),t._postSynchronousEvent("focusAfter",{})}),s.on("keydown",n.cancelLinkSelector,function(a){13==a.which||32==a.which?(a.preventDefault(),p(u),t.hide(),t._postSynchronousEvent("focusAfter",{})):9!=a.which||a.shiftKey||(a.preventDefault(),t._postSynchronousEvent("focusAfter",{}))}),s.on("keydown",function(a){27===a.which&&(t.hide(),t._postSynchronousEvent("focusAfter",{}))}),s.on("keydown",function(a){a.stopPropagation()})}),this.render=a,this.focusBefore=c,this.focusAfter=d}c.trace("PETs-Client-Core::StatusMessageControl::ctor");var m="statusmessagecontrol",n={template:i.getTemplateNameFromPath(k.path),statusTextSelector:"#aes-status-input",submitLinkSelector:".aes-submit",cancelLinkSelector:".aes-cancel",charactersRemainingSelector:"#aes-status-input-count",maximumStatusMessageCharacters:140};return{create:function(a,b){c.trace("PETs-Client-Core::StatusMessageControl::create"),b.$parentElement=b.$parseElement;var e=d.extend(l,arguments,a,b);return e.load(),e}}});

define("pets-client-chat/1.10.0/public/javascript/chattabscontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-thirdparty/1.4.1/public/javascript/underscore","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/chattypeenum","pets-client-chat/1.10.0/public/partialsClient/chat/chattab.compiled"],function(a,b,c,d,e,f,g,h,i){function j(d){function e(a){return c.isUndefinedOrNull(J)?(f.getCache(l+d).snapshot(function(b){c.isUndefinedOrNull(b)&&(b={viewId:d,activeTabAddress:"unknown"}),J=b,c.doCallback(a,this,b)}),null):(c.doCallback(a,this,J),J)}function i(a){J=a,f.getCache(l+d).set(a)}function j(a,b,c,d,e,f){var g={address:a,type:b,label:c,presence:d,avatarUrl:e,unreadMessageCount:f,selected:!1};0===H.length?H.push(g):H.splice(E(b),0,g),z()}function m(a,b){var d=c.searchObjectArray(H,"address",a);H.splice(c.searchObjectArray(H,"address",a),1),C(a).remove(),b||e(function(b){b.activeTabAddress===a&&A(0===H.length?G:d>H.length-1?H[H.length-1].address:H[d].address)})}function n(){H.length=0,D().remove(),r()}function o(a,b){var d=c.getObjectFromObjectArray(H,"address",a);c.isUndefinedOrNull(d)||(d.presence=b,z())}function p(a,b){var d=c.getObjectFromObjectArray(H,"address",a);c.isUndefinedOrNull(d)||(d.avatarUrl=b,z())}function q(a,b){var d=c.getObjectFromObjectArray(H,"address",a);c.isUndefinedOrNull(d)||(d.unreadMessageCount=b,z())}function r(){return B(G),G}function s(a,b){B(a,b)}function t(){return e().activeTabAddress}function u(){return e().activeTabAddress===G}function v(a){return a===G}function w(){return H.length}function x(a){I.TabSelected.push(a)}function y(a){I.AddTabSelected.push(a)}function z(){e(function(a){g.applyTemplate(k.main.templateName,{chatTabs:H,addTabSelected:a.activeTabAddress===G},function(a,b){a||(F.get$ClientAreaRootElement().empty().append(b),c.addKeyboardActivationToLinkButtons(F.get$ClientAreaRootElement()))})})}function A(a){var b;b=a!==G?I.TabSelected:I.AddTabSelected;for(var c=0,d=b.length;d>c;c++)b[c].call(F,{address:a})}function B(a,d){var f;c.isUndefinedOrNull(d)&&(d=!1),e(function(b){b.activeTabAddress=a,i(b)}),b.each(H,function(a){a.selected=!1}),a!==G&&(f=c.getObjectFromObjectArray(H,"address",a),d||(f.unreadMessageCount=0),f.selected=!0),z()}function C(a){return F.get$ClientAreaRootElement().find('li[data-address="'+a+'"]')}function D(){return F.get$ClientAreaRootElement().find("li[data-address]")}function E(a){var b,c=0;for(b=H.length-1;b>-1;b--)if(H[b].type===a){c=b+1;break}return-1===b&&(c=a===h.OneOnOne?0:H.length),c}var F,G="__addTab",H=[],I={TabSelected:[],AddTabSelected:[]},J={};e(),this.windowCreated(function(){z(),this.get$ClientAreaRootElement().on("click",function(b){if("li"===b.target.tagName.toLowerCase()||"img"===b.target.tagName.toLowerCase()||"a"===b.target.tagName.toLowerCase()){var c=a(b.target);A(c.attr("data-address")?c.attr("data-address"):c.parents("li[data-address]").attr("data-address"))}})}),this.addTab=j,this.removeTab=m,this.removeTabs=n,this.setAddTabActive=r,this.setActiveTab=s,this.updateTabPresence=o,this.updateTabAvatar=p,this.updateTabUnreadMessageCount=q,this.makeTabActive=B,this.getActiveTabAddress=t,this.getIsAddTabActive=u,this.isAddTab=v,this.getTabCount=w,this.tabSelected=x,this.addTabSelected=y,F=this}d.trace("PETs-Client-Chat::chatTabsControl::ctor");var k={main:{templateName:g.getTemplateNameFromPath(i.path)}},l="chattabscontrol.viewstates.";return{create:function(a,b){var c=e.extend(j,arguments,a,b);return c.load(),c}}});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chatsection.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatsection.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-pets-chat-content\"><div id=\"aes-pets-chat-message-log\" class=\"aes-pets-chat-messages\" role=\"log\" aria-live=\"polite\" aria-atomic=\"false\" aria-relevant=\"additions\"></div>").partial("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.template",ctx,null).write("</div><form class=\"aes-field\"><label for=\"aes-chat-textarea\" class=\"aes-pets-sr-only\">Your Message:</label><textarea id=\"aes-chat-textarea\" aria-controls=\"aes-pets-chat-message-log\"></textarea></form>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatsection.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chatsection.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/chat/chatwindow.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatwindow.template",body_0);var blocks={'clientArea':body_2,'footerControls':body_3,'headerControls':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-core/2.6.0/public/partialsClient/window/windowbase.template",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatwindowheadercontrols.template",ctx,null);}function body_2(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chat.template",ctx,null);}function body_3(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/chat/chattabscontrol.template",ctx,null);}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/chatwindow.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/chatwindow.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/groupbuttoncontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/chat/groupbuttoncontrol.compiled"],function(a,b,c,d,e,f){function g(){function a(a){o.render(a)}function c(a){m.html(a),n.addClass(h.divClass)}function d(a){m.attr("title",a)}function e(){b.isUndefinedOrNull(l)||l.addClass(h.hideClass)}function f(){b.isUndefinedOrNull(l)||l.removeClass(h.hideClass)}function g(a){q.ContactClicked.push(a)}function i(a){q.AddFriend.push(a)}function j(a){for(var b=0,c=q.ContactClicked.length;c>b;b++)q.ContactClicked[b].call(p,a)}function k(a){for(var b=0,c=q.AddFriend.length;c>b;b++)q.AddFriend[b].call(p,a)}var l,m,n,o,p=this,q={ContactClicked:[],AddFriend:[]};p.windowCreated(function(){l=p.get$ClientAreaRootElement(),m=l.find(h.buttonSelector),n=l.find(h.groupNameDivSelector),o=p.getControl(h.listControlId),o.setOpenerWindow(p),o.hide(),o.contactClicked(function(a){j(a)}),o.addFriend(function(a){k(a)})}),p.render=a,p.contactClicked=g,p.addFriend=i,p.setCaption=c,p.setCaptionTitle=d,p.__hide=e,p.__show=f}var h={templateName:e.getTemplateNameFromPath(f.path),buttonSelector:".aes-chat-invite-button-link",listControlId:"aes-group-chat-users-list",groupNameDivSelector:"#aes-groupname-div",hideClass:"aes-hide",divClass:"aes-pets-icon aes-down"};return{create:function(a,b){b.template=h.templateName;var c=d.extend(g,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/groupchatuserslistcontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/partialsClient/chat/groupchatuserslist.compiled"],function(a,b,c,d,e,f,g,h){function i(c){function d(a){b.isUndefinedOrNull(a)?s():(b.isUndefinedOrNull(a.jid)||(x=a.jid),q(function(c){var d;b.isUndefinedOrNull(a.contextId)||c.activeContextId===a.contextId||(c.activeContextId=a.contextId,r(c)),d=p(a,c),"showGroupChatUsers"==d.showGroupChatUsers&&u.render(d,null,s)}))}function f(a){z.ContactClicked.push(a)}function h(a){z.AddFriend.push(a)}function i(){b.isUndefinedOrNull(t)&&(t=w.get$ClientAreaRootElement()),b.isUndefinedOrNull(u)&&(u=m(j.contactList.controlId),u.show())}function l(a){return c+"-"+a}function m(a){return w.getControl(l(a))}function n(a){for(var b=0,c=z.ContactClicked.length;c>b;b++)z.ContactClicked[b].call(w,a)}function o(a){for(var b=0,c=z.AddFriend.length;c>b;b++)z.AddFriend[b].call(w,a)}function p(d,e){var f=a.extend(!0,{},v,d,e,{id:c,contextId:e.activeContextId,config:{},options:{}});if(d.participantInfos!==!0||b.isUndefinedOrNull(v)||(d.participantInfos=v.participantInfos),!b.isUndefinedOrNull(d.participantInfos)){for(var h,i,j=0;j<d.participantInfos.length;j++)h=b.getObjectFromObjectArray(f.contacts,"jid",d.participantInfos[j].jid),b.isUndefinedOrNull(h)?(d.participantInfos[j].presence={current:g.Available},d.participantInfos[j].groups=[]):(i=b.getObjectFromObjectArray(d.contacts,"jid",d.participantInfos[j].jid),b.isUndefinedOrNull(i)||(h.groups=i.groups),a.extend(d.participantInfos[j],h));f.contacts=d.participantInfos,f.showGroupChatUsers="showGroupChatUsers"}return v={isConnected:f.isConnected,config:f.config,contacts:b.isUndefinedOrNull(d.contacts)?b.isUndefinedOrNull(v)?null:v.contacts:d.contacts,contactGroups:b.isUndefinedOrNull(d.contactGroups)?b.isUndefinedOrNull(v)?null:v.contactGroups:d.contactGroups,contactsDefined:f.contactsDefined,participantInfos:b.isUndefinedOrNull(d.participantInfos)?b.isUndefinedOrNull(v)?null:v.participantInfos:d.participantInfos,options:f.options},f}function q(a){var d=x;b.isUndefinedOrNull(y[d])?e.getCache(k+c+"."+d).snapshot(function(e){b.isUndefinedOrNull(e)&&(e={viewId:c,activeContextId:null}),y[d]=e,a(e)}):a(y[d])}function r(a){y[x]=a,e.getCache(k+c+"."+x).set(a)}function s(){i()}var t,u,v,w=this,x="unknown",y={},z={ContactClicked:[],AddFriend:[]};w.windowCreated(function(){i(),u.contactClicked(function(a){n(a)}),u.addFriend(function(a){o(a)})}),w.resized(s),w.render=d,w.contactClicked=f,w.addFriend=h}var j={main:{templateName:f.getTemplateNameFromPath(h.path)},contactList:{controlId:"aes-contacts-list"}},k="groupchatuserslistcontrol.viewstates.";return{create:function(a,b){b.template=j.main.templateName;var c=d.extend(i,arguments,a,b);return c.load(),c}}});

define('pets-client-chat/1.10.0/public/partialsClient/chat/contactinvitationlist.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/chat/contactinvitationlist.template",body_0);function body_0(chk, ctx){return chk.write("<div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-chat-contacts-filtered-list\" class=\"aes-contacts\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactfilteredlistcontrol\"data-widget-options=\"resizeToParentClientArea=false;selectOnly=true;selectOnlyWhenAvailable=true\"></div>").partial("/te/pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.template",ctx,null);}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/chat/contactinvitationlist.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/chat/contactinvitationlist.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/invitebuttoncontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/chat/invitebuttoncontrol.compiled"],function(a,b,c,d,e,f){function g(){function a(a){e.replaceContentFromTemplate(d,h.templateName,a)}function b(a){g.Clicked.push(a)}function c(){for(var a=0,b=g.Clicked.length;b>a;a++)g.Clicked[a].call(f)}var d,f=this,g={Clicked:[]};this.windowCreated(function(){d=f.get$ClientAreaRootElement(),d.on("click",h.buttonSelector,function(){c()})}),this.clicked=b,this.render=a}var h={templateName:e.getTemplateNameFromPath(f.path),buttonSelector:".aes-chat-invite-button-link"};return{create:function(a,b){b.template=h.templateName;var c=d.extend(g,arguments,a,b);return c.load(),c}}});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/availablegrouplist.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegrouplist.template",body_0);function body_0(chk, ctx){return chk.write("<ul>").exists(ctx.getPath(false,["options","showAvailableGroups"]),ctx,{"block":body_1},null).write("</ul>");}function body_1(chk, ctx){return chk.notexists(ctx.get("searchFilterText"),ctx,{"block":body_2},null);}function body_2(chk, ctx){return chk.exists(ctx.get("contactGroups"),ctx,{"block":body_3},null);}function body_3(chk, ctx){return chk.section(ctx.get("contactGroups"),ctx,{"block":body_4},{"clickOnlyWhenAvailable":ctx.getPath(false,["options","clickOnlyWhenAvailable"])});}function body_4(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegroupitem.template",ctx,null);}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegrouplist.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/availablegrouplist.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/contactgroupscontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/contacts/contactgroups.compiled"],function(a,b,c,d,e,f){function g(d){function f(a,d){c.trace("PETs-Client-Contacts::contactGroupsControl::render"),e.replaceContentFromTemplate(m,h.templateName,j(a),function(a){b.addKeyboardActivationToMenu(m),d&&d(a)})}function g(){return l.get$ClientAreaRootElement().find(h.optionSelector).first()}function i(a){n.GroupSelected.push(a)}function j(b){var c=a.extend(!0,b,{id:d});return c}function k(a){for(var b=0,c=n.GroupSelected.length;c>b;b++)n.GroupSelected[b].call(l,a)}var l,m,n={GroupSelected:[]};this.windowCreated(function(){c.trace("PETs-Client-Contacts::contactGroupsControl::windowCreated"),m=l.get$ClientAreaRootElement(),m.on("click",h.optionSelector,function(){k({name:a(this).attr(h.optionIdAttr),displayName:a(this).text()})}),m.keydown(function(a){9==a.which&&l.hide()})}),this.render=f,this.__get$focusInElement=g,this.groupSelected=i,this.shown(this.focus),l=this}var h={templateName:e.getTemplateNameFromPath(f.path),optionSelector:".aes-contact-group-option",optionIdAttr:"data-address"};return{create:function(a,b){var c=d.extend(g,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/contactsfiltercontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfilter.compiled"],function(a,b,c,d,e,f,g,h){function i(f){function g(a,b){d.trace("PETs-Client-Contacts::contactsFilterControl::render"),c.isUndefinedOrNull(a)||c.isUndefinedOrNull(a.jid)||(C=a.jid),r(function(d){var e,f=null!==a,g=f&&!c.isUndefinedOrNull(a)&&!c.isUndefinedOrNull(a.contacts)&&a.contacts.length>0,h=x.get$ClientAreaRootElement(),i=q(a,d);e=f&&!c.isUndefinedOrNull(i.searchFilterText),h.find(j.search.inputSelector).val(e?i.searchFilterText:""),h.find(j.search.selector).toggle(g&&e),h.find(j.group.selector).toggle(g&&!e),y.render(i,b)})}function h(){y.focus()}function i(){x.get$ClientAreaRootElement().find(j.group.searchToggleSelector).focus()}function l(){var a=x.get$ClientAreaRootElement().find(j.search.inputSelector);a.data("focusApplicationInitiated",!0),a.focus()}function m(a){E.SearchTextOnFocus.push(a)}function n(a){E.SearchTextChanged.push(a)}function o(a){E.GroupSelected.push(a)}function p(a){return x.getControl(f+"-"+a)}function q(b,c){var d=a.extend(!0,{},b,c,{id:f,config:{},options:{}});return d}function r(a){var d=C;c.isUndefinedOrNull(D[d])?e.getCache(k+f+"."+d).snapshot(function(e){c.isUndefinedOrNull(e)&&(e={viewId:f,searchFilterText:null,groupFilterText:"*",groupFilterDisplayText:b.ALL_CONTACTS_GROUP_NAME}),D[d]=e,A=e.groupFilterText,B=e.groupFilterDisplayText,a(e)}):(A=D[d].groupFilterText,B=D[d].groupFilterDisplayText,a(D[d]))}function s(a){D[C]=a,A=a.groupFilterText,B=a.groupFilterDisplayText,e.getCache(k+f+"."+C).set(a)}function t(a,b){for(var c=0,d=E.SearchTextOnFocus.length;d>c;c++)E.SearchTextOnFocus[c].call(x,{searchText:a,focusApplicationInitiated:b})}function u(a){r(function(b){b.searchFilterText=a,s(b);for(var c=0,d=E.SearchTextChanged.length;d>c;c++)E.SearchTextChanged[c].call(x,{searchText:a})})}function v(a){r(function(b){b.groupFilterText=a.name,b.groupFilterDisplayText=a.displayName,s(b);for(var c=0,d=E.GroupSelected.length;d>c;c++)E.GroupSelected[c].call(x,a)})}function w(){return A}var x,y,z,A,B,C="unknown",D={},E={SearchTextOnFocus:[],SearchTextChanged:[],SearchTextCancelled:[],GroupSelected:[]};this.windowCreated(function(){d.trace("PETs-Client-Contacts::contactsFilterControl::windowCreated"),y=p(j.group.groupSelectionControlId),y.groupSelected(v);var b=x.get$ClientAreaRootElement();b.on("focus",j.search.inputSelector,function(){var b=a(this),c=b.data("focusApplicationInitiated");b.data("focusApplicationInitiated",!1),t(b.val(),c)}),b.on("keyup",j.search.inputSelector,function(b){var c=27===b.keyCode,d=c?null:a(this).val();d!==z&&(z=d,u(z))}),b.on("click",j.search.clearSelector,function(a){a.preventDefault(),z=null,u(z)}),b.on("click",j.group.searchToggleSelector,function(){z="",u(z)}),x.render()}),this.render=g,this.focus=h,this.searchTextOnFocus=m,this.searchTextChanged=n,this.groupSelected=o,this.getGroupSelected=w,this.setFocusOnSearchToggle=i,this.setFocusOnSearchFilter=l,x=this}var j={template:g.getTemplateNameFromPath(h.path),search:{selector:".aes-search-contact",inputSelector:".aes-search-contact input",clearSelector:".aes-close",hideClassName:"aes-hide"},group:{selector:".aes-group-module",searchToggleSelector:".aes-search",groupSelectionControlId:"aes-group-selection"}},k="contactsfiltercontrol.viewstates.";return{create:function(a,b){b.template=j.template;var c=f.extend(i,arguments,a,b);return c.load(),c}}});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/error.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/error.template",body_0);var blocks={'error':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.exists(ctx.get("description"),ctx,{"block":body_2},null);}function body_2(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<p>").reference(ctx.get("description"),ctx,"h").write("</p>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/error.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/error.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.template",body_0);var blocks={'error':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<p>").helper("if",ctx,{"else":body_2,"block":body_3},{"cond":body_4}).write("</p>");}function body_2(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("Unable to connect.<br/><a id=\"aes-contacts-petsbar-message-action\" href=\"javascript:void(0);\" data-address=\"connect\">Try again</a>");}function body_3(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("You are connected somewhere else.<br/><a id=\"aes-contacts-petsbar-message-action\" href=\"javascript:void(0);\" data-address=\"connect\">Reconnect</a>");}function body_4(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("'").reference(ctx.get("condition"),ctx,"h").write("' == '").reference(ctx.getPath(false,["conditionEnum","Conflict"]),ctx,"h").write("'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.template",body_0);var blocks={'error':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.helper("if",ctx,{"block":body_2},{"cond":body_6});}function body_2(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<p>").helper("if",ctx,{"else":body_3,"block":body_4},{"cond":body_5}).write("</p>");}function body_3(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("Unable to connect.<br/><a id=\"aes-contacts-petsbar-message-action\" href=\"javascript:void(0);\" data-address=\"connect\">Try again</a>");}function body_4(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("You are connected somewhere else.<br/><a id=\"aes-contacts-petsbar-message-action\" href=\"javascript:void(0);\" data-address=\"connect\">Reconnect</a>");}function body_5(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("'").reference(ctx.get("condition"),ctx,"h").write("' == '").reference(ctx.getPath(false,["conditionEnum","Conflict"]),ctx,"h").write("'");}function body_6(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("'").reference(ctx.get("condition"),ctx,"h").write("' != '").reference(ctx.getPath(false,["conditionEnum","None"]),ctx,"h").write("'");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.template",body_0);var blocks={'error':body_1};function body_0(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorbase.template",ctx,null);}function body_1(chk, ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<p>System error. //todo:REF# 3001<br/>Please <a href=\"javascript:window.location.reload();\">refresh your page</a></p>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/groupselection.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/groupselection.template",body_0);function body_0(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.template",ctx,null).write("<ul id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contact-groups\" role=\"menu\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactgroupscontrol\"data-widget-options=\"isModal=true;isVisible=false;resizeToParentClientArea=false\"></ul>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/groupselection.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/groupselection.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselection.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselection.template",body_0);function body_0(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.template",ctx,null).write("<ul id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-presence-list\" role=\"menu\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/presenceoptionscontrol\"data-widget-options=\"isModal=true;isVisible=false;resizeToParentClientArea=false\"style=\"position:absolute;\"></ul>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselection.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselection.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/presenceoptionscontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionoptions.compiled"],function(a,b,c,d,e,f,g,h){function i(d){function h(a,d){c.trace("PETs-Client-Contacts::presenceOptionsControl::render"),g.replaceContentFromTemplate(r,k.template,n(a),function(a){b.addKeyboardActivationToMenu(r),d&&d(a)})}function i(){return q.get$ClientAreaRootElement().find(k.optionSelector).first()}function l(a){s.ShiftTabbed.push(a)}function m(a){s.PresenceSelected.push(a)}function n(b){var c=a.extend(!0,b,{id:d});return c}function o(){for(var a=0,b=s.ShiftTabbed.length;b>a;a++)s.ShiftTabbed[a].call(q)}function p(a){for(var b=0,c=s.PresenceSelected.length;c>b;b++)s.PresenceSelected[b].call(q,{presence:a})}var q,r,s={ShiftTabbed:[],PresenceSelected:[]};this.windowCreated(function(){c.trace("PETs-Client-Contacts::presenceOptionsControl::windowCreated"),r=q.get$ClientAreaRootElement(),r.on("click",k.optionSelector,function(){var b=a(this).attr(k.optionIdAttr);p(b),f.publishEvent(e.PresenceSet,j,{presence:b})}),r.keydown(function(b){9==b.which&&(q.hide(),b.shiftKey&&"function"==a.type(window.ActiveXObject)&&(b.preventDefault(),o()))})}),this.render=h,this.shiftTabbed=l,this.presenceSelected=m,this.__get$focusInElement=i,this.shown(this.focus),q=this}var j="presenceoptionscontrol",k={template:g.getTemplateNameFromPath(h.path),optionSelector:"li",optionIdAttr:"data-address"};return{create:function(a,b){var c=d.extend(i,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/contactsfootercontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/preferences","pets-client-chat/1.10.0/public/partialsClient/contacts/contactsfooter.compiled"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){function d(a,d){var e=a&&a.groupRefresh,f=a&&a.isConnected,g=a&&a.contactsDefined&&a.contacts.length>0;q.find(m.groupChatSelector).val(a&&i.getContactGroupInfo(a.selectedGroupName).type===i.GroupTypes.LearningTeam?b.START_TEAM_CHAT:b.START_GROUP_CHAT),e||(q.find(m.groupChatSelector).toggleClass(m.hiddenClassName,!g||!f),q.find(m.preferencesSelector).toggleClass(m.hiddenClassName,!(a&&a.contactsDefined))),n(),c.doCallback(d)}function e(a){t.PreferenceSelected.push(a)}function h(a){t.GroupChatSelected.push(a)}function k(){q.toggleClass(m.selectedClassName),n(),a(m.soundOn).focus()}function l(){q.toggleClass(m.selectedClassName),n()}function n(){a(m.preferencesSelector).attr("aria-expanded",q.hasClass(m.selectedClassName))}function o(a){for(var b=0,c=t.PreferenceSelected.length;c>b;b++)t.PreferenceSelected[b].call(s,a)}function p(a){for(var b=0,c=t.GroupChatSelected.length;c>b;b++)t.GroupChatSelected[b].call(s,a)}var q,r="contactsfootercontrol",s=this,t={PreferenceSelected:[],GroupChatSelected:[]};this.windowCreated(function(){q=a(s.get$ClientAreaRootElement()),q.on("click",m.preferencesSelector,function(){q.hasClass(m.selectedClassName)?l():k(),j.get("playSound")&&q.find(m.soundOn).attr("checked","checked")}),q.on("click",m.soundOn,function(){var b=a(this).is(":checked");o({preferenceName:"playSound",preferenceValue:b}),g.publishEvent(f.PreferenceSet,r,{preference:"playSound",value:b})}),q.on("keyup",m.soundOn,function(b){27==b.keyCode&&(b.preventDefault(),l(),a(m.preferencesSelector).focus())}),q.on("keydown",m.soundOn,function(b){9==b.which&&(b.preventDefault(),l(),a(m.preferencesSelector).focus())}),q.on("click",m.groupChatSelector,function(){p({participants:[]})}),s.render()}),this.preferenceSelected=e,this.groupChatSelected=h,this.render=d}var m={templateName:h.getTemplateNameFromPath(k.path),groupChatSelector:".aes-group-chat",preferencesSelector:"button.aes-preferences",preferencesFlyoutSelector:".aes-flyout",soundOn:"#soundOn:checkbox",hiddenClassName:"aes-hide",selectedClassName:"aes-selected"};return{create:function(a,b){b.template=m.templateName;var c=e.extend(l,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/chatsound", ["pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/petsconfig!pets-client-chat/1.10.0/public/config/chat","pets-client-core/2.6.0/public/javascript/audio","pets-client-chat/1.10.0/public/javascript/preferences","pets-client-chat/1.10.0/public/javascript/chatsoundenum"],function(a,b,c,d,e){function f(a){switch(a){case e.NewMessage:d.get("playSound")&&c.playSound(b.notificationSound)}}return{playSound:f}});

define("pets-client-chat/1.10.0/public/javascript/contactfilteredlistcontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-chat/1.10.0/public/javascript/contactsinfo","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/partialsClient/contacts/contactfilteredlist.compiled"],function(a,b,c,d,e,f,g,h,i,j){function k(d,e){function j(a,d,e){c.trace("PETs-Client-Contacts::ContactFilteredListControl::render");var f=d===o.Resize?a:x(a);switch(b.isUndefinedOrNull(d)&&(d=o.UpdateContacts),d){case o.Resize:if(!b.isUndefinedOrNull(G)){var g=G.find("#"+v(n.contactsFilter.controlId)).outerHeight();G.find(".aes-list").height(f.height-g)}break;case o.UpdateContacts:I.render(f,function(){H.render(f,H.RenderOperations.UpdateContacts,e)});break;case o.UpdatePresence:H.render(f,H.RenderOperations.UpdatePresence,e)}}function k(a,b){H.updateSelectedJids(a,b)}function p(){return H.getSelectedJids()}function q(a){L.GroupClicked.push(a)}function r(a){L.ContactClicked.push(a)}function s(a){L.TeamClicked.push(a)}function t(a){L.AddFriend.push(a)}function u(a){L.GroupSelected.push(a)}function v(a){return d+"-"+a}function w(a){return J.getControl(v(a))}function x(c,f){var g;return f?(delete l.contacts,delete l.contactGroups,g=a.extend(!0,l,c)):(g=c,g.id=d),g.options=a.extend(e,c.options),b.isUndefinedOrNull(g.config)&&(g.config={}),b.isUndefinedOrNull(g.isConnected)&&(g.isConnected=g.connectionStatus===i.Connected||g.connectionStatus===i.Attached),l=g,g}function y(a){h.getContactsInfo(function(c){var d=x(c,!0);d.searchFilterText=a.searchText,I.render(d),H.render(d,H.RenderOperations.ApplySearchFilter,function(){b.isUndefinedOrNull(a.searchText)?I.setFocusOnSearchToggle():I.setFocusOnSearchFilter()}),b.isUndefinedOrNull(a.searchText)||0==a.searchText.length?K=!1:K||(K=!0,g.publishEvent(f.ContactsSearched,m,{parentId:J.getParentWindow().getId()}))})}function z(a){h.getContactsInfo(function(b){var c=x(b,!0);c.groupFilterText=a.name,c.groupFilterDisplayText=a.displayName,I.render(c),H.render(c,H.RenderOperations.ApplyGroupFilter,function(){I.focus()}),g.publishEvent(f.ContactsFiltered,m,{filter:a.name,parentId:J.getParentWindow().getId()})}),E({name:a.name,displayName:a.displayName})}function A(a){for(var b=0,c=L.GroupClicked.length;c>b;b++)L.GroupClicked[b].call(J,a)}function B(a){for(var b=0,c=L.ContactClicked.length;c>b;b++)L.ContactClicked[b].call(J,a)}function C(a){for(var b=0,c=L.TeamClicked.length;c>b;b++)L.TeamClicked[b].call(J,a)}function D(a){for(var b=0,c=L.AddFriend.length;c>b;b++)L.AddFriend[b].call(J,a)}function E(a){for(var b=0,c=L.GroupSelected.length;c>b;b++)L.GroupSelected[b].call(J,a)}function F(){return I.getGroupSelected()}var G,H,I,J=this,K=!1,L={GroupClicked:[],ContactClicked:[],TeamClicked:[],AddFriend:[],GroupSelected:[]};this.windowCreated(function(){c.trace("PETs-Client-Contacts::ContactFilteredListControl::windowCreated"),G=J.get$ClientAreaRootElement(),I=w(n.contactsFilter.controlId),I.searchTextOnFocus(function(a){a.focusApplicationInitiated||(K=!1)}),I.searchTextChanged(y),I.groupSelected(z),I.show(),H=w(n.contactList.controlId),H.groupClicked(function(a){A(a)}),H.contactClicked(function(a){B(a)}),H.teamClicked(function(a){C(a)}),H.addFriend(function(a){D(a)})}),this.RenderOperations=o,this.groupClicked=q,this.groupSelected=u,this.getGroupSelected=F,this.contactClicked=r,this.teamClicked=s,this.addFriend=t,this.render=j,this.updateSelectedJids=k,this.getSelectedJids=p}var l,m="contactfilteredlistcontrol",n={main:{templateName:e.getTemplateNameFromPath(j.path)},contactsFilter:{controlId:"aes-contacts-filter"},contactList:{controlId:"aes-contacts-list"}},o={UpdateContacts:0,UpdatePresence:1,Resize:2};return{create:function(a,c){c.template=n.main.templateName,b.isUndefinedOrNull(c.clickOnlyWhenAvailable)&&(c.clickOnlyWhenAvailable=b.isUndefinedOrNull(c.parentOptions.clickOnlyWhenAvailable)?!1:c.parentOptions.clickOnlyWhenAvailable),b.isUndefinedOrNull(c.showAvailableGroups)&&(c.showAvailableGroups=b.isUndefinedOrNull(c.parentOptions.showAvailableGroups)?!1:c.parentOptions.showAvailableGroups),b.isUndefinedOrNull(c.selectOnly)&&(c.selectOnly=b.isUndefinedOrNull(c.parentOptions.selectOnly)?!1:c.parentOptions.selectOnly),b.isUndefinedOrNull(c.selectOnlyWhenAvailable)&&(c.selectOnlyWhenAvailable=b.isUndefinedOrNull(c.parentOptions.selectOnlyWhenAvailable)?!1:c.parentOptions.selectOnlyWhenAvailable);var e=d.extend(k,arguments,a,c);return e.load(),e}}});

define("pets-client-chat/1.10.0/public/javascript/contactscontroller", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/dynamicloader","pets-client-core/2.6.0/public/javascript/petsconfig!modulemanifest","pets-client-core/2.6.0/public/javascript/externalevent","pets-client-core/2.6.0/public/javascript/controllerbase","pets-client-core/2.6.0/public/javascript/petsconfig!pets","pets-client-core/2.6.0/public/javascript/windowmanager","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-chat/1.10.0/public/javascript/preferences","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/connectionerrorconditionenum","pets-client-chat/1.10.0/public/javascript/contactsinfochangedenum","pets-client-chat/1.10.0/public/javascript/contactsinfo","pets-client-chat/1.10.0/public/javascript/chatapi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){function g(){c.trace("PETs-Client-Chat::contactsController:onPrerequisiteLoaded"),N||(N=!0,b.isUndefinedOrNull(F)||w(F.topic,F.message),O||b.isUndefinedOrNull(G)||t(G,H))}function s(a,b){c.trace("PETs-Client-Contacts::contactsController::onConnectionChanged"),t(b.connectionStatus,b.connectionErrorCondition)}function t(a,c){var d;N?(a===n.ConnectionFailed||a===n.AuthenticationFailed||a===n.Disconnected||a===n.Error?d=L.ConnectionError:(a===n.Connected||a===n.Attached)&&(d=L.ConnectionEstablished),(d===L.ConnectionError||d===L.ConnectionEstablished)&&(M.updateViews({renderOperation:d,connectionStatus:a,connectionStatusText:b.getObjPropNameByValue(n,a),connectionErrorCondition:c}),u(a,c)),O=!0):(G=a,H=c)}function u(a,b){a===n.Disconnected&&b===o.None&&q.loadFromCache(),q.getContactsInfo(function(a){M.updateViews(function(){return x(null,a)})})}function v(a,b){c.trace("PETs-Client-Contacts::contactsController::onContactsInfoChanged");var d=b.contactsInfo;(b.contactsInfoChanged===p.ContactInfo||b.contactsInfoChanged===p.Presence)&&M.updateViews(function(){return x(b.contactsInfoChanged,d)})}function w(a,b){N?M.updateViews({renderOperation:L.UnreadMessages,unreadMessageCount:b.unreadMessageCount}):F={topic:a,message:b}}function x(a,c,d){var e={contactsInfoChanged:b.isUndefinedOrNull(a)?p.ContactInfo:a};return e.config={jive:h.jive,profile:h.profile},e.jid=c.jid,e.connectionStatus=c.connectionStatus,e.connectionErrorCondition=c.connectionErrorCondition,e.isConnected=c.connectionStatus===n.Connected||c.connectionStatus===n.Attached,e.isSetOffline=!e.isConnected&&c.connectionErrorCondition===o.None,e.userPresence=e.isConnected?m.Available:m.Offline,b.isUndefinedOrNull(d)||(e.controllerAction=d),e.contactsDefined=c.contactsDefined,e.contacts=c.contacts,e.contactGroups=c.contactGroups,e}function y(a,b){c.trace("PETs-Client-Contacts::ContactsController::contactClick"),f.subscribe(J.ContactClick+a,b)}function z(a,b){c.trace("PETs-Client-Contacts::ContactsController::groupClick"),f.subscribe(J.GroupClick+a,b)}function A(a,b){c.trace("PETs-Client-Contacts::ContactsController::postContactClick"),f.publish(J.ContactClick+a,{widgetId:a,participants:b})}function B(a,b){c.trace("PETs-Client-Contacts::ContactsController::postGroupClick"),f.publish(J.GroupClick+a,{widgetId:a,participants:b})}function C(c){b.isUndefinedOrNull(c)?c=[]:a.isArray(c)||(c=[c]),r.postCreateChat(c)}function D(c){q.getContactsInfo(function(d){var e=[],f=b.getObjectFromObjectArray(d.contactGroups,"name",c);null!=f&&(a.each(f.contactJids,function(a,b){e.push(b)}),r.postCreateNamedMuc(null,c,e))})}function E(a,b){switch(a){case K.GroupClicked:i.getWindow(b.widgetId).getOption("renderInDock")?C(b.jids):B(b.widgetId,b.jids);break;case K.ContactClicked:i.getWindow(b.widgetId).getOption("renderInDock")?q.getContact(b.jid).presence.current!==m.Offline&&(C(b.jid),k.publishEvent(j.StartConversation,I)):A(b.widgetId,b.jid);break;case K.TeamClicked:i.getWindow(b.widgetId).getOption("renderInDock")&&D(b.name);break;case K.AddFriend:q.addFriend(b.jid);break;case K.PreferenceSelected:l.set(b);break;case K.ConnectionRequested:r.postConnectRequested();break;case K.DisconnectionRequested:r.postDisconnectRequested(o.None);break;case K.GroupChatRequested:r.getContactGroupInfo(b.groupName).type===r.GroupTypes.LearningTeam?D(b.groupName):r.postMucRoomRequested()}}var F,G,H,I="contactscontroller",J={ContactClick:"edu.apollogrp.pets.contacts.contactscontroller.contactclick.",GroupClick:"edu.apollogrp.pets.contacts.contactscontroller.groupclick.",PresenceClick:"edu.apollogrp.pets.contacts.contactsController.presenceclick"},K={GroupClicked:0,ContactClicked:1,AddFriend:2,PreferenceSelected:3,ConnectionRequested:4,DisconnectionRequested:5,GroupChatRequested:6,TeamClicked:7},L={Normal:0,ConnectionEstablished:1,ConnectionError:2,UnreadMessages:3},M=this,N=!1,O=!1;d.postLoadFunctionality(e.availableFunctionality.petsClientChat),M.viewRegistered(g),r.unreadMessageCountChanged(w),q.contactsInfoChanged(v),q.connectionChanged(s),(q.getConnectionStatus()===n.Connected||q.getConnectionStatus()===n.Attached)&&t(q.getConnectionStatus()),this.handleViewAction=E,this.contactClick=y,this.groupClick=z,this.postContactClick=A,this.postGroupClick=B,this.Actions=K,this.RenderOperations=L}return c.trace("PETS-Client-Contacts::ContactsController::ctor"),g.extend(s)});

define("pets-client-chat/1.10.0/public/javascript/chatcontroller", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-thirdparty/1.4.1/public/javascript/underscore","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/petsconfig!pets","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/dynamicloader","pets-client-core/2.6.0/public/javascript/petsconfig!modulemanifest","pets-client-core/2.6.0/public/javascript/controllerbase","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/chatstateenum","pets-client-chat/1.10.0/public/javascript/chattypeenum","pets-client-chat/1.10.0/public/javascript/contactsinfo","pets-client-chat/1.10.0/public/javascript/contactsinfochangedenum","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/messagingapi","pets-client-chat/1.10.0/public/javascript/presenceapi","pets-client-chat/1.10.0/public/javascript/chatsessions","pets-client-chat/1.10.0/public/javascript/messagehistories"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(){function j(b){d.trace("PETs-Client-Chat::ChatController:onPrerequisiteLoaded: "+b),-1==a.inArray(b,Gb)&&Gb.push(b),4!==Gb.length||Jb||fb()}function x(a,b){Kb=b.statusCode,b.statusCode===m.Disconnected&&(Q(null,0),hb()),b.statusCode===m.Connected&&(Gb.length>=4&&fb(),gb())}function y(a,b){d.trace("PETs-Client-Chat::ChatConroller::onCreateChat"),d.debug("PETs-Client-Chat::ChatController.onCreateChat","${nl}Topic: "+a,b),db(b.participants)}function z(a,b){d.trace("PETs-Client-Chat::ChatController::onUserJoinedMuc"),v.exists(b.room)||ab(b.room,p.Muc,null,null),b.room!=v.getLastViewedAddress()&&O(b.room)}function A(){nb(null,[])}function B(a,b){d.trace("PETs-Client-Chat::ChatController::onMucRoomCreated"),rb(b.room)}function C(a,b){d.trace("PETs-Client-Chat::ChatController::onMucRoomInvalidated"),Ab(Db.UserClosedConversation,{address:b.room,invalidated:!0})}function D(a,b){d.trace("PETs-Client-Chat::ChatController:onMessageReceived"),bb(b,!0)}function E(a,b){d.trace("PETs-Client-Chat::ChatController:onMucMessageReceived"),cb(b,!0)}function F(a){d.trace("PETs-Client-Chat::ChatController:handlePresenceChanged"),v.exists(a.jid)&&v.get(a.jid).isVisible&&(a.presence.previous!==n.Unknown&&tb(a.jid,a.presence.current),c.isUndefinedOrNull(a.presence.previous)||a.presence.previous===n.Offline||a.presence.current!==n.Offline||H(a.jid)===n.Offline?!c.isUndefinedOrNull(a.presence.previous)&&a.presence.previous!==n.Offline||a.presence.current!==n.Available||H(a.jid)===n.Available||bb({room:a.jid,presence:n.Available,name:a.name,sentDateTime:new Date},!1):bb({room:a.jid,presence:n.Offline,name:a.name,sentDateTime:new Date},!1))}function G(a){d.trace("PETs-Client-Chat::ChatController:handleContactChanged"),v.exists(a.jid)&&v.get(a.jid).isVisible&&ub(a.jid,a.avatarUrl)}function H(a){var b=w.get(a);if(!c.isUndefinedOrNull(b))for(var d=b.length-1;d>=0;d--)if(!c.isUndefinedOrNull(b[d].presence))return b[d].presence;return-1}function I(a,b){d.trace("PETs-Client-Chat::ChatController:onMucPresenceChanged");var e,f,g=v.get(b.room),h=q.getContact(b.from);c.isUndefinedOrNull(g)&&(g=ab(b.room,p.Muc,null,null),O(b.room)),f=c.searchObjectArray(g.participantInfos,"jid",b.from),c.isUndefinedOrNull(h)&&(h={jid:b.from,name:b.name,mucPresence:{previous:{}}},c.isUndefinedOrNull(h.name)&&f>-1&&(h.name=g.participantInfos[f].name)),g.isVisible&&(e=h.mucPresence.previous[b.room],b.presence===n.Offline?(f>-1&&g.participantInfos.splice(f,1),v.update(g),e!==n.Offline&&(cb({room:b.room,name:h.name,msgType:Fb.Outgoing,sentDateTime:new Date},!1),zb(b.room,b.from))):-1===f&&(g.participantInfos.push({jid:b.from,name:h.name}),v.update(g),(e===n.Offline||c.isUndefinedOrNull(e))&&cb({room:b.room,name:h.name,msgType:Fb.Incoming,sentDateTime:new Date},!1),yb(b.room,b.from)))}function J(a,b){d.trace("PETs-Client-Chat::ChatController:onStateChanged"),ib(b.state,b.jid,b.jid)}function K(a,b){d.trace("PETs-Client-Chat::ChatController:onMucStateChanged"),ib(b.state,b.room,b.jid)}function L(){d.trace("PETs-Client-Chat::ChatController::onContactsInfoConnectionChanged"),q.getContactsInfo(function(a){N(a)})}function M(a,b){var d;if(N(b.contactsInfo),b.jid!==eb()&&(d=q.getContact(b.jid),!c.isUndefinedOrNull(d)))switch(b.contactsInfoChanged){case r.Presence:F(d);break;case r.ContactInfo:G(d)}}function N(b){d.trace("PETs-Client-Chat::ChatController::onContactsInfoChanged");var c={renderOperation:Cb.UpdateContactList};c.config={jive:f.jive,profile:f.profile},c.jid=b.jid,c.isConnected=b.connectionStatus===m.Connected||b.connectionStatus===m.Attached,c.contactsDefined=a.isArray(b.contacts),c.contacts=b.contacts,c.contactGroups=b.contactGroups,c.participantInfos=!0,Hb.updateViews(c)}function O(a){var b=w.get(a);rb(a,c.isUndefinedOrNull(b)?null:b.messages)}function P(a,b){_(a,b)}function Q(a,b){if(c.isUndefinedOrNull(a))s.postUnreadMessageCountChanged(b);else{var d=v.get(a);d.unreadMessageCount=b,v.update(d)}}function R(b){c.isUndefinedOrNull(b)?b=[]:a.isArray(b)||(b=[b]),s.postCreateChat(b)}function S(a,b){var d=v.get(a);c.isUndefinedOrNull(d)||d.type===p.OneOnOne?s.postCreateMuc(b):(s.postAddUsersToMuc(a,b),O(a))}function T(a){var b=v.get(a);c.isUndefinedOrNull(b)?nb():b.type===p.OneOnOne?nb(null,v.get(a).participantInfos):ob(a,v.get(a).participantInfos)}function U(a){O(a)}function V(a){jb(a)}function W(a){kb(a)}function X(b,c){a.trim(c).length>0&&Y(b,c)}function Y(a,b){d.trace("PETs-Client-Chat::ChatController:sendMessage");var e="msg"+a+(new Date).getTime().toString(),f={id:e,from:eb(),body:b,sentDateTime:c.getDateAsIso8601()},g=v.get(a);t.postSendMessage(e,a,b),g.type===p.OneOnOne&&(Z(a,f,g),w.add(a,f),sb(a,f)),l.publishEvent(k.MessageSent,Bb,{msgLength:b.length,conversationCount:lb(),participantCount:g.participantInfos.length})}function Z(b,e,f){d.trace("PETs-Client-Chat::ChatController:addMessageDisplayProperties");var h,i=w.get(b);c.isUndefinedOrNull(i)||(e.priorMessageFromRoom=i.messages[i.messages.length-1].fromRoom),e.self=e.from===eb(),e.fromRoom=$(e),e.self||e.fromRoom||!c.isUndefinedOrNull(e.name)||(c.isUndefinedOrNull(f)&&(f=v.get(c.coalesce(e.room,e.from))),c.isUndefinedOrNull(f)||(h=c.getObjectFromObjectArray(f.participantInfos,"jid",e.from),c.isUndefinedOrNull(h)&&(h=q.getContact(e.from)),(c.isUndefinedOrNull(f.lastMessageSentDateTime)||e.sentDateTime>f.lastMessageSentDateTime)&&(e.isHistoric=!1,f.lastMessageSentDateTime=e.sentDateTime,v.update(f))),e.name=c.isUndefinedOrNull(h)?g.UNKNOWN_USER:h.name),c.isUndefinedOrNull(e.body)||(e.body=a("<div/>").text(e.body).html())}function $(a){return!c.isUndefinedOrNull(a.room)&&c.isUndefinedOrNull(a.from)}function _(a,b){d.trace("PETs-Client-Chat::ChatController::destroyChatSession");var e=v.get(a);c.isUndefinedOrNull(e)||(qb(a,b),e.type===p.OneOnOne?(e.isVisible=!1,v.update(e),kb(a)):(v.remove(a),w.remove(a),b===!0?e.unreadMessageCount>0&&Q(null,v.getUnreadMessageCount()):u.postPresenceChangeRequested(n.Offline,a)))}function ab(a,b,c){d.trace("PETs-Client-Chat::ChatController:createChatSession");var e,f,h,i,j,k,l=v.getMucCount()+1;return b===p.OneOnOne?(f=q.getContact(c[0]),e=f.name,i=[{jid:f.jid,name:f.name}]):(k=s.dejidify(a),h=s.getContactGroupInfo(k),e=h.type===s.GroupTypes.LearningTeam?h.displayName:g.GROUP+" "+l.toString(),i=[]),j=v.createChatSession(e,a,b,l,i),v.add(j),mb(a,b,e),j}function bb(a,b){d.trace("PETs-Client-Chat::ChatController:handleMessageReceived");var e,f,g,h=$(a),i=h?a.room:a.from,j=!1,m=1;a.sentDateTime=c.getDateAsIso8601(a.sentDateTime),e=v.exists(i),f=e?f=v.get(i):ab(i,p.OneOnOne,[i],[a]),Z(i,a,f),b&&w.add(i,a),e?(f.isVisible||(j=!0,f.isVisible=!0,v.update(f),mb(i,p.OneOnOne,f.label)),j?(g=w.get(i),rb(i,g.messages)):sb(i,a),m=f.participantInfos.length):rb(i,[a]),wb(i,a.from),a.body&&l.publishEvent(k.MessageReceived,Bb,{msgLength:a.body.length,conversationCount:lb(),participantCount:m})}function cb(a,b){d.trace("PETs-Client-Chat::ChatController:handleMucMessageReceived");$(a);a.sentDateTime=c.getDateAsIso8601(a.sentDateTime),Z(a.room,a),(!a.fromRoom||c.isUndefinedOrNull(a.body)||"this room is not anonymous"!==a.body.toLowerCase())&&(wb(a.room,a.from),b&&w.add(a.room,a),sb(a.room,a))}function db(a){d.trace("PETs-Client-Chat::ChatConroller::handleCreateChat");var b,e,f;a.length>1?s.postCreateMuc(a):(b=a[0],f=w.get(b),e=v.get(b),c.isUndefinedOrNull(e)?ab(b,p.OneOnOne,a):e.isVisible||(e.isVisible=!0,v.update(e),mb(e.address,e.type,e.label)),rb(b,c.isUndefinedOrNull(f)?null:f.messages))}function eb(){return c.isUndefinedOrNull(Ib)&&(Ib=e.getPetsId()),Ib}function fb(){d.trace("PETs-Client-Chat::ChatController:restoreChatSessions"),v.ensureLoaded(function(){w.ensureLoaded(function(){var a,d,e,f=v.get(),g=v.getLastViewedAddress(),h=v.getUnreadMessageCount();if(!c.isUndefinedOrNull(f)){f=b.sortBy(f,function(a){return a.order});for(var i=0,j=f.length;j>i;i++)if(d=f[i],d.isVisible){if(d.type===p.Muc&&Kb!==m.Attached&&(w.remove(d.address),0==d.participantInfos.length)){v.remove(d.address),g===d.address&&(g=null);continue}e||(e=d.address),mb(d.address,d.type,d.label,d.unreadMessageCount)}h>0&&Q(null,h),e?(c.isUndefinedOrNull(g)&&(g=e,v.setLastViewedAddress(g)),a=w.get(g),rb(g,c.isUndefinedOrNull(a)?null:a.messages,!1)):Hb.hideViews(),Jb=!0}})})}function gb(){var a,b;if(!Jb)return void setTimeout(gb,5);if(a=v.get(),!c.isUndefinedOrNull(a))for(var d=0,e=a.length;e>d;d++)b=a[d],b.isVisible&&b.type===p.Muc&&(pb(b.address,null),w.remove(b.address),s.postJoinMucRoom(b.address))}function hb(){Hb.updateViews({renderOperation:Cb.ShowDisconnected})}function ib(a,b,c){if(d.trace("PETs-Client-Chat::ChatController:handleStateChanged"),c!==eb()&&null!=c)switch(a){case o.Active:wb(b,c);break;case o.Composing:vb(b,c)}}function jb(a){u.postStateChangeRequested(o.Composing,a)}function kb(a){u.postStateChangeRequested(o.Active,a)}function lb(){for(var a=v.get(),b=0,c=0,d=a.length;d>c;c++)a[c].isVisible&&b++;return b}function mb(a,b,d,e){var f,g={};g.renderOperation=Cb.AddConversation,g.address=a,g.type=b,g.label=d,g.unreadMessageCount=c.isUndefinedOrNull(e)?0:e,b===p.OneOnOne?(f=q.getContact(a),g.avatarUrl=f.avatarUrl,g.presence=f.presence.current):g.avatarGroupNumber=(v.get(a).groupNumber-1)%3+1,Hb.updateViews(g)}function nb(b,c){var d=a.isArray(c)?a.map(c,function(a){return a.jid}):c,e={renderOperation:Cb.InviteUsersToNewConversation,address:b,contextId:b,inviteeJids:d};Hb.updateViews(e)}function ob(b,c){var d=a.isArray(c)?a.map(c,function(a){return a.jid}):c,e={renderOperation:Cb.InviteUsersToExistingConversation,address:b,contextId:b,participantJids:d};Hb.updateViews(e)}function pb(a,b){var c={};c.renderOperation=Cb.ShowMessageHistory,c.address=a,c.messages=b,Hb.updateViews(c)}function qb(a,b){var c={};c.renderOperation=Cb.RemoveConversation,c.address=a,c.invalidated=b,Hb.updateViews(c)}function rb(a,b,d){var e,f={},g=v.get(a),h=q.getContact(a);c.isUndefinedOrNull(g)||(c.isUndefinedOrNull(h)||(e=h.presence.current),f.renderOperation=Cb.SetActiveConversation,f.restoreWindow=c.isUndefinedOrNull(d)?!0:d,f.address=a,f.label=c.isUndefinedOrNull(g)?null:g.label,f.messages=b,f.presence=e,f.participantInfos=g.participantInfos,f.isMuc=g.type===p.Muc,f.unreadMessageCount=g.unreadMessageCount,Hb.updateViews(f),v.setLastViewedAddress(a))}function sb(a,b){var c={};c.renderOperation=Cb.AppendToMessageHistory,c.address=a,c.message=b,Hb.updateViews(c)}function tb(a,b){var c={};c.renderOperation=Cb.UpdateConversationPresence,c.address=a,c.presence=b,Hb.updateViews(c)}function ub(a,b){var c={};c.renderOperation=Cb.UpdateConversationAvatar,c.address=a,c.avatarUrl=b,Hb.updateViews(c)}function vb(a,d){var e,f,h=v.get(a);c.isUndefinedOrNull(h)||(e=c.getObjectFromObjectArray(h.participantInfos,"jid",d),f=c.isUndefinedOrNull(e)?g.UNKNOWN_USER:e.name,-1===c.searchObjectArray(h.typingNotifications,"jid",d)&&(f.indexOf(" ")>-1&&(f=f.split(" ")[0]),h.typingNotifications.push({jid:d,name:f}),v.update(h),xb(a,b.pluck(h.typingNotifications,"name"))))}function wb(a,d){var e,f,g=v.get(a);c.isUndefinedOrNull(g)||(e=g.typingNotifications,f=c.searchObjectArray(e,"jid",d),e.splice(f,1),v.update(g),xb(a,b.pluck(g.typingNotifications,"name")))}function xb(a,b){var c={};c.renderOperation=Cb.UpdateTypingNotification,c.address=a,c.typingNotifications=b,Hb.updateViews(c)}function yb(a,b){var c={},d=v.get(a);c.renderOperation=Cb.AddUserToConversation,c.address=a,c.participant=b,c.participantInfos=d.participantInfos,Hb.updateViews(c)}function zb(a,b){var c={},d=v.get(a);c.renderOperation=Cb.RemoveUserFromConversation,c.address=a,c.participant=b,c.participantInfos=d.participantInfos,Hb.updateViews(c)}function Ab(a,b){switch(a){case Db.ConversationSelected:O(b.address);break;case Db.UserStartedMessage:V(b.address);break;case Db.UserClearedMessage:W(b.address);break;case Db.UserEnteredMessage:X(b.address,b.message);break;case Db.UserClosedConversation:P(b.address,b.invalidated);break;case Db.UnreadMessageCountChanged:Q(b.address,b.unreadMessageCount);break;case Db.AddUsersToConversationRequested:S(b.address,b.participants),l.publishEvent(k.StartGroupChat,Bb);break;case Db.InvitationRequested:T(b.address);break;case Db.InvitationCancelled:U(b.address);break;case Db.ChatRequested:q.getContact(b.jid).presence.current!==n.Offline&&(R(b.jid),l.publishEvent(k.StartConversation,Bb));break;case Db.AddFriend:q.addFriend(b.jid)}}var Bb="chatcontroller",Cb={ShowDisconnected:0,AppendToMessageHistory:1,ShowMessageHistory:2,UpdateTypingNotification:3,AddConversation:4,RemoveConversation:5,SetActiveConversation:6,AddUserToConversation:7,RemoveUserFromConversation:8,UpdateConversationPresence:9,UpdateContactList:10,InviteUsersToNewConversation:11,InviteUsersToExistingConversation:12,UpdateConversationAvatar:13},Db={ConversationSelected:0,UserStartedMessage:1,UserClearedMessage:2,UserEnteredMessage:3,UserClosedConversation:4,UnreadMessageCountChanged:5,AddUsersToConversationRequested:6,InvitationRequested:7,InvitationCancelled:8,ChatRequested:9,AddFriend:10},Eb={ChatSessionsLoaded:"CSL",ContactsLoaded:"CL",MessageHistoriesLoaded:"MHL",ViewRegistered:"VR"},Fb={Incoming:"muc_incoming",Outgoing:"muc_outgoing"},Gb=[],Hb=this,Ib=null,Jb=!1,Kb=m.Disconnected;h.postLoadFunctionality(i.availableFunctionality.petsClientChat),Hb.viewRegistered(function(){j(Eb.ViewRegistered)}),s.createChat(y),s.userJoinedMuc(z),s.mucRoomRequested(A),s.mucRoomCreated(B),s.mucRoomInvalidated(C),s.connectionChanged(x),t.messageReceived(D),t.mucMessageReceived(E),u.mucPresenceChanged(I),u.stateChanged(J),u.mucStateChanged(K),v.cachedDataLoaded(function(){j(Eb.ChatSessionsLoaded)}),w.cachedDataLoaded(function(){j(Eb.MessageHistoriesLoaded)}),q.contactsLoaded(function(){j(Eb.ContactsLoaded)}),q.connectionChanged(L),q.contactsInfoChanged(M),this.handleViewAction=Ab,this.Actions=Db,this.RenderOperations=Cb}return d.trace("Pets-Client-Chat::ChatController::ctor"),j.extend(x)});

define("pets-client-chat/1.10.0/public/javascript/chatmessageareacontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-core/2.6.0/public/javascript/petsconfig!pets","pets-client-chat/1.10.0/public/javascript/chatconfig","pets-client-chat/1.10.0/public/partialsClient/chat/chatsection.compiled","pets-client-chat/1.10.0/public/partialsClient/chat/chatmessage.compiled","pets-client-chat/1.10.0/public/partialsClient/chat/chattypingnotification.compiled"],function(a,b,c,d,e,f,g,h,i,j){function k(){function d(a,c){if(v.get$ClientAreaRootElement().find(".aes-pets-chat-messages").empty(),!b.isUndefinedOrNull(a))for(var d=0,e=a.length;e>d;d++)m(a[d],!0,c)}function h(a){m(a,!1)}function i(){v.get$ClientAreaRootElement().find(".aes-field > textarea").val("")}function j(a){b.isUndefinedOrNull(a)&&(a=!0),a&&v._postSynchronousEvent("hit"),setTimeout(function(){v.get$ClientAreaRootElement().find(".aes-field > textarea").focus()},f.uiFocusDelayMs)}function k(){v.get$ClientAreaRootElement().find(".aes-pets-progress").html("")}function m(a,d,f){a.formattedSentDateTime=b.formatDate(a.sentDateTime,g.dateTimeFormatSpecifier),a.self&&(a.name=g.selfIdentifier),a.isMultiple=d,e.applyTemplate(l.message.templateName,a,function(a,e){c.trace("PETs-Client-Chat::chatMessageAreaControl::renderMessage::applyTemplate(Anon)"),b.isUndefinedOrNull(f)&&(f=!1),a||(d||(f=r()),w.find(".aes-pets-chat-messages").append(e),!d&&f?w.animate({scrollTop:w.prop("scrollHeight")}):d&&w.prop("scrollTop",w.prop("scrollHeight")))})}function n(a){var b=r();e.replaceFromTemplate(v.get$ClientAreaRootElement().find(".aes-pets-progress"),l.typingNotification.templateName,a,function(a){a||b&&w.animate({scrollTop:w.prop("scrollHeight")})})}function o(){v.get$ClientAreaRootElement().find("textarea").prop("disabled",!0)}function p(){v.get$ClientAreaRootElement().find("textarea").prop("disabled",!1)}function q(a,b){for(var c=0,d=a.length;d>c;c++)"undefined"==typeof b?a[c].call(v):a[c].call(v,b)}function r(){return w.prop("scrollHeight")-w.prop("scrollTop")===w.outerHeight()-(w.get(0).offsetHeight-w.get(0).clientHeight)}function s(a){x.UserStartedMessage.push(a)}function t(a){x.UserClearedMessage.push(a)}function u(a){x.UserEnteredMessage.push(a)}var v,w,x={UserStartedMessage:[],UserClearedMessage:[],UserEnteredMessage:[]};this.windowCreated(function(){var b=0;w=v.get$ClientAreaRootElement().find(".aes-pets-chat-content"),this.get$ClientAreaRootElement().find(".aes-field > textarea").keydown(function(c){13===c.which&&(c.preventDefault(),a.trim(this.value).length>0&&(c.shiftKey?this.value+="\r\n":(q(x.UserEnteredMessage,{message:this.value}),this.value="",b=0)))}).keyup(function(){0===b&&this.value.length>0&&q(x.UserStartedMessage),b=this.value.length})}),this.resized(function(a){w.height(a.clientAreaSize.height-58)}),this.userStartedMessage=s,this.userClearedMessage=t,this.userEnteredMessage=u,this.clearMessageTextBox=i,this.setFocusToMessageTextBox=j,this.clearTypingNotification=k,this.showMessageHistory=d,this.appendToMessageHistory=h,this.updateTypingNotification=n,this.disableMessageArea=o,this.enableMessageArea=p,v=this}c.trace("PETs-Client-Chat::chatTabsControl::ctor");var l={main:{templateName:e.getTemplateNameFromPath(h.path)},message:{templateName:e.getTemplateNameFromPath(i.path)},typingNotification:{templateName:e.getTemplateNameFromPath(j.path)}};return{create:function(a,b){b.template=l.main.templateName;var c=d.extend(k,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/contactinvitationlistcontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/partialsClient/chat/contactinvitationlist.compiled","pets-client-chat/1.10.0/public/partialsClient/chat/invitationbuttons.compiled"],function(a,b,c,d,e,f,g,h,i){function j(c){function d(a){b.isUndefinedOrNull(a)?u():(b.isUndefinedOrNull(a.jid)||(z=a.jid),p(function(c){var d;b.isUndefinedOrNull(a.contextId)||c.activeContextId===a.contextId||(c.activeContextId=a.contextId,q(c)),d=o(a,c),e.replaceFromTemplate(v.find(k.invitationButtons.selector),k.invitationButtons.templateName,{isConnected:d.isConnected},function(){w.render(d,null,u)})}))}function h(a){B.InviteesInvited.push(a)}function i(a){B.InviteesCleared.push(a)}function j(){b.isUndefinedOrNull(v)&&(v=y.get$ClientAreaRootElement()),b.isUndefinedOrNull(w)&&(w=n(k.contactFilteredList.controlId))}function m(a){return c+"-"+a}function n(a){return y.getControl(m(a))}function o(d,e){var f=b.isUndefinedOrNull(d)||b.isUndefinedOrNull(d.contacts)?x:{},g=a.extend(!0,f,d,e,{id:c,contextId:e.activeContextId});return x={isConnected:g.isConnected,config:g.config,contactGroups:g.contactGroups,contacts:g.contacts,contactsDefined:g.contactsDefined,options:g.options},g}function p(a){var d=z;b.isUndefinedOrNull(A[d])?f.getCache(l+c+"."+d).snapshot(function(e){b.isUndefinedOrNull(e)&&(e={viewId:c,activeContextId:null}),A[d]=e,a(e)}):a(A[d])}function q(a){A[z]=a,f.getCache(l+c+"."+z).set(a)}function r(a){for(var b=t(a),c=0,d=B.InviteesInvited.length;d>c;c++)B.InviteesInvited[c].call(y,b)}function s(a){for(var b=0,c=B.InviteesInvited.length;c>b;b++)B.InviteesCleared[b].call(y,a)}function t(c){return a.grep(c,function(a){var c=b.getObjectFromObjectArray(x.contacts,"jid",a);return!b.isUndefinedOrNull(c)&&c.presence.current!=g.Offline})}function u(){var a;j(),b.isUndefinedOrNull(w)||(clientAreaHeight=y.getClientAreaSize().height,a=v.find(k.invitationButtons.selector).outerHeight(),w.render({height:clientAreaHeight-a},w.RenderOperations.Resize))}var v,w,x,y=this,z="unknown",A={},B={InviteesInvited:[],InviteesCleared:[]};y.windowCreated(function(){j(),v.on("click",k.invitationButtons.inviteButtonSelector,function(){r(w.getSelectedJids().slice(0)),w.updateSelectedJids(null,!1)}),v.on("click",k.invitationButtons.cancelButtonSelector,function(){s(w.getSelectedJids().slice(0)),w.updateSelectedJids(null,!1),d([])})}),y.resized(u),y.render=d,y.inviteesInvited=h,y.inviteesCleared=i}var k={main:{templateName:e.getTemplateNameFromPath(h.path)},contactFilteredList:{controlId:"aes-chat-contacts-filtered-list"},invitationButtons:{templateName:e.getTemplateNameFromPath(i.path),selector:".aes-invitation-buttons",inviteButtonSelector:".aes-submit",cancelButtonSelector:".aes-cancel"}},l="contactinvitationlistcontrol.viewstates.";return{create:function(a,b){b.template=k.main.templateName;var c=d.extend(j,arguments,a,b);return c.load(),c}}});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contactlist.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactlist.template",body_0);function body_0(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/availablegrouplist.template",ctx,null).write("<section class=\"aes-contacts-list\" data-contextid=\"").reference(ctx.get("contextId"),ctx,"h").write("\">").exists(ctx.get("contactsDefined"),ctx,{"else":body_1,"block":body_2},null).write("</section>");}function body_1(chk, ctx){return chk.write("<p class=\"aes-pets-messages\">Loading contacts...</p>").partial("/te/pets-client-core/2.6.0/public/partialsClient/dock/browsernotice.template",ctx,null);}function body_2(chk, ctx){return chk.exists(ctx.get("groupContacts"),ctx,{"block":body_3},null).exists(ctx.get("allContacts"),ctx,{"block":body_8},null).notexists(ctx.get("groupContacts"),ctx,{"block":body_11},null);}function body_3(chk, ctx){return chk.exists(ctx.get("searchFilterText"),ctx,{"block":body_4},null).write("<ul>").section(ctx.get("groupContacts"),ctx,{"block":body_7},{"profileEnabled":ctx.getPath(false,["config","profile","enabled"]),"selectOnly":ctx.getPath(false,["options","selectOnly"]),"selectOnlyWhenAvailable":ctx.getPath(false,["options","selectOnlyWhenAvailable"]),"clickOnlyWhenAvailable":ctx.getPath(false,["options","clickOnlyWhenAvailable"]),"friendshipStatusEnumApproved":ctx.getPath(false,["friendshipStatusEnum","Approved"]),"friendshipStatusEnumPending":ctx.getPath(false,["friendshipStatusEnum","Pending"]),"groupTypeEnumLearningTeam":ctx.getPath(false,["groupTypeEnum","LearningTeam"])}).write("</ul>");}function body_4(chk, ctx){return chk.helper("if",ctx,{"block":body_5},{"cond":body_6});}function body_5(chk, ctx){return chk.write("<h4>Matches In ").reference(ctx.get("groupFilterDisplayText"),ctx,"h").write("</h4>");}function body_6(chk, ctx){return chk.write("'").reference(ctx.get("groupFilterText"),ctx,"h").write("' !== '*'");}function body_7(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.template",ctx,null);}function body_8(chk, ctx){return chk.exists(ctx.get("searchFilterText"),ctx,{"block":body_9},null);}function body_9(chk, ctx){return chk.write("<h4>All Other Matches</h4><ul>").section(ctx.get("allContacts"),ctx,{"block":body_10},{"isConnected":ctx.get("isConnected"),"profileEnabled":ctx.getPath(false,["config","profile","enabled"]),"selectOnly":ctx.getPath(false,["options","selectOnly"]),"selectOnlyWhenAvailable":ctx.getPath(false,["options","selectOnlyWhenAvailable"]),"clickOnlyWhenAvailable":ctx.getPath(false,["options","clickOnlyWhenAvailable"]),"friendshipStatusEnumApproved":ctx.getPath(false,["friendshipStatusEnum","Approved"]),"friendshipStatusEnumPending":ctx.getPath(false,["friendshipStatusEnum","Pending"]),"groupTypeEnumLearningTeam":ctx.getPath(false,["groupTypeEnum","LearningTeam"])}).write("</ul>");}function body_10(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactitem.template",ctx,null);}function body_11(chk, ctx){return chk.notexists(ctx.get("allContacts"),ctx,{"block":body_12},null);}function body_12(chk, ctx){return chk.write("<p class=\"aes-pets-messages\">No contacts found</p>").notexists(ctx.get("showGroupChatUsers"),ctx,{"block":body_13},null);}function body_13(chk, ctx){return chk.exists(ctx.getPath(false,["config","jive","enabled"]),ctx,{"block":body_14},null);}function body_14(chk, ctx){return chk.partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/searchpeoplebutton.template",ctx,null);}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contactlist.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contactlist.compiled'],function(){});

define('pets-client-chat/1.10.0/public/partialsClient/contacts/contacts.compiled', ['ncf-templating/dust-1.2.2/public/javascript/dust'],function(dust){
 (function(){dust.register("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contacts.template",body_0);function body_0(chk, ctx){return chk.write("<div class=\"aes-contacts aes-dock-content\"><div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-presence\" role=\"menubar\" class=\"aes-selection\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/presencecontrol\"data-widget-options=\"resizeToParentClientArea=false;staticPosition=true;escapeToCollapse=true\"style=\"position:absolute;\"></div>").partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/error.template",ctx,null).partial("/te/pets-client-chat/1.10.0/public/partialsClient/contacts/message.template",ctx,null).write("<div id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-filtered-list\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactfilteredlistcontrol\"data-widget-options=\"resizeToParentClientArea=false\"></div><footer id=\"").reference(ctx.get("id"),ctx,"h").write("-aes-contacts-footer\"data-controlfactory=\"pets-client-chat/1.10.0/public/javascript/contactsfootercontrol\"data-widget-options=\"resizeToParentClientArea=false;isVisible=false\"></footer></div>");}return body_0;})();; return { path: '/te/pets-client-chat/1.10.0/public/partialsClient/contacts/contacts.template' };
});
require(['pets-client-chat/1.10.0/public/partialsClient/contacts/contacts.compiled'],function(){});

define("pets-client-chat/1.10.0/public/javascript/groupselectioncontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/partialsClient/contacts/groupselection.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/groupselectionheader.compiled"],function(a,b,c,d,e,f,g){function h(b){function d(a,b){c.trace("PETs-Client-Contacts::contactGroupsControl::render");var d=j(a);e.replaceFromTemplate(m.find(i.header.selector),i.header.template,d,function(){n.render(d,b),m.find(i.header.selector).keydown(function(a){40!=a.which&&38!=a.which||n.getIsVisible()?9==a.which&&n.getIsVisible()&&n.hide():n.show()})})}function f(){m.find(i.header.selector).focus()}function g(a){o.GroupSelected.push(a)}function h(a){return l.getControl(b+"-"+a)}function j(c){var d=a.extend(!0,c,{id:b});return d}function k(a){for(var b=0,c=o.GroupSelected.length;c>b;b++)o.GroupSelected[b].call(l,a)}var l,m,n,o={GroupSelected:[]};this.windowCreated(function(){c.trace("PETs-Client-Contacts::contactGroupsControl::windowCreated"),m=l.get$ClientAreaRootElement(),n=h(i.contactGroups.controlId),n.groupSelected(k),n.setOpenerWindow(l)}),this.render=d,this.focus=f,this.groupSelected=g,l=this}var i={main:{template:e.getTemplateNameFromPath(f.path),selectedStyle:"aes-selected"},header:{template:e.getTemplateNameFromPath(g.path),selector:".aes-selection-header"},contactGroups:{controlId:"aes-contact-groups"}};return{create:function(a,b){b.template=i.main.template;var c=d.extend(h,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/presencecontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselection.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/presenceselectionheader.compiled"],function(a,b,c,d,e,f,g,h,i){function j(b){function c(a,b){var c=j(a);e.replaceFromTemplate(n.find(k.header.selector),k.header.template,c,function(){o.render(c,b),n.find(k.header.selector).keydown(function(a){40!=a.which&&38!=a.which||o.getIsVisible()?9==a.which&&(o.getIsVisible()&&o.hide(),a.shiftKey&&(a.preventDefault(),m())):o.show()})})}function d(){n.find(k.header.selector).focus()}function f(a){q.PresenceSelected.push(a)}function h(a){q.FocusBefore.push(a)}function i(a){return p.getControl(b+"-"+a)}function j(c){var d=a.extend(!0,c,{id:b,presenceEnum:g});return d}function l(a){for(var b=0,c=q.PresenceSelected.length;c>b;b++)q.PresenceSelected[b].call(p,a);d()}function m(){for(var a=0,b=q.FocusBefore.length;b>a;a++)q.FocusBefore[a].call(p,{})}var n,o,p=this,q={PresenceSelected:[],FocusBefore:[]};p.windowCreated(function(){n=p.get$ClientAreaRootElement(),o=i(k.options.controlId),o.presenceSelected(l),o.shiftTabbed(m),o.setOpenerWindow(p)}),p.presenceSelected=f,p.focusBefore=h,p.render=c,p.focus=d}var k={main:{template:e.getTemplateNameFromPath(h.path)},header:{template:e.getTemplateNameFromPath(i.path),selector:".aes-selection-header"},options:{controlId:"aes-presence-list"}};return{create:function(a,b){b.template=k.main.template;var c=d.extend(j,arguments,a,b);return c.load(),c}}});

define("pets-client-chat/1.10.0/public/javascript/contactwidgetfactory", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/widgetbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/contactsinfo","pets-client-chat/1.10.0/public/javascript/contactscontroller","pets-client-chat/1.10.0/public/partialsClient/contacts/contactwidget.compiled"],function(a,b,c,d,e,f,g,h,i,j){function k(d,j){function k(){c.trace("PETs-Client-Contacts::ContactControl::init"),w.base.init()}function n(a,d){c.trace("Pets-Client-Contacts::ContactControl::render");var f=b.isUndefinedOrNull(a)||b.isUndefinedOrNull(a.renderOperation)?i.RenderOperations.Normal:a.renderOperation;switch(f){case i.RenderOperations.Normal:e.replaceContentFromTemplate(t,m.templateName,q(a),d)}}function o(a){var c;b.isUndefinedOrNull(t)&&(t=w.get$ClientAreaRootElement()),c=t.attr(m.contactJidAttribute),b.isUndefinedOrNull(c)?p(null,a):0===c.indexOf("PROFILE_ID=")?f.getPetsIdByProfileIdQueue(c.split("=")[1],function(b){p(b,a)}):f.getPetsIdByAlternateId(c,function(b){p(b,a)})}function p(a,c){u=a,b.isUndefinedOrNull(u)?c(!1):(u=u.toLowerCase(),c(!0))}function q(c){var e,i,k=!0;return b.isUndefinedOrNull(c)?e=h.getContact(u):(k=c.isConnected,e=b.getObjectFromObjectArray(c.contacts,"jid",u)),b.isUndefinedOrNull(e)?b.isUndefinedOrNull(v)?(e=h.createContact(u,null,null,null,g.Unknown,null,null,null,null,null,null,null,f.friendshipStatusEnum.Unknown),v=e):e=v:v=e,i=a.extend(!0,e,{id:d,config:{},isConnected:k,presenceEnum:g,friendshipStatusEnum:f.friendshipStatusEnum,displayChat:j.displayChat,displayFriending:j.displayFriending})}function r(){alert("Sorry, this feature (Friend Request) not yet implemented")}function s(){i.handleViewAction(i.Actions.ContactClicked,{widgetId:d,jid:u})}c.trace("PETs-Client-Contacts::ContactControl::ctor");var t,u,v,w=this;i.registerView(d,w),w.windowCreated(function(){o(function(a){a&&(t.on("click",m.contactButtonSelector,function(){r(),analytics.publishEvent(analyticsEventsEnum.FriendRequest,l,{controlId:d})}),t.on("click",m.chatButtonSelector,function(){s()})),w.postLoaded()})}),w.init=k,w.render=n}c.trace("PETs-Client-Contacts::contactControlFactory::ctor");var l="contactcontrol",m={templateName:e.getTemplateNameFromPath(j.path),contactJidAttribute:"data-address",contactButtonSelector:"a.aes-pets-contacts-button.aes-user-friendrequest",chatButtonSelector:"a.aes-pets-contacts-button.aes-user-chatrequest"};return{create:function(a,e){return c.trace("Pets-Client-Contacts::contactControlFactory::create"),e.template=m.templateName,b.isUndefinedOrNull(e.displayChat)&&(e.displayChat=!0),b.isUndefinedOrNull(e.displayFriending)&&(e.displayFriending=!0),d.extend(k,a,e)}}});

define("pets-client-chat/1.10.0/public/javascript/chatwidgetfactory", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-thirdparty/1.4.1/public/javascript/underscore","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/widgetbase","pets-client-core/2.6.0/public/javascript/windowmanager","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/idlehandler","pets-client-chat/1.10.0/public/javascript/chatsoundenum","pets-client-chat/1.10.0/public/javascript/chattypeenum","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/chatsound","pets-client-chat/1.10.0/public/javascript/chatcontroller","pets-client-chat/1.10.0/public/partialsClient/chat/chatwindow.compiled"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(d){function e(){G.base.init(),G.postLoaded()}function k(){return Math.max(150,40*(C.getTabCount()+1))}function l(){return 170}function r(b){switch(b.renderOperation){case q.RenderOperations.ShowDisconnected:G.hide({hideAll:!0});break;case q.RenderOperations.UpdateTypingNotification:C.getActiveTabAddress()===b.address&&B.updateTypingNotification(b);break;case q.RenderOperations.AppendToMessageHistory:C.getActiveTabAddress()===b.address?(B.appendToMessageHistory(b.message),B.setFocusToMessageTextBox(),G.getIsMinimized()&&!b.message.fromRoom&&x(b.address,1)):b.message.fromRoom||b.message.isHistoric||x(b.address,1),b.message.self||b.message.fromRoom||p.playSound(m.NewMessage);break;case q.RenderOperations.ShowMessageHistory:C.getActiveTabAddress()===b.address&&B.showMessageHistory(b.messages);break;case q.RenderOperations.InviteUsersToNewConversation:c.isUndefinedOrNull(b.address)&&(b.address=C.setAddTabActive(),b.contextId=b.address,G.setCaption(g.NEW_CONVERSATION),u(b,!1)),w(!0),G.getIsVisible()||G.show(),G.getIsMinimized()?G.restoreWindow(function(){v(b),G.focus()}):(v(b),G.focus());break;case q.RenderOperations.InviteUsersToExistingConversation:w(!0),v(b);break;case q.RenderOperations.AddConversation:H.push({address:b.address,type:b.type,unreadMessageCount:b.unreadMessageCount}),C.addTab(b.address,b.type,b.label,b.presence,b.avatarUrl,b.unreadMessageCount);break;case q.RenderOperations.RemoveConversation:var d=c.searchObjectArray(H,"address",b.address);d>=0&&(b.invalidated&&G.hide({address:b.address,invalidated:b.invalidated}),H.splice(d,1),C.removeTab(b.address,b.invalidated));break;case q.RenderOperations.SetActiveConversation:var e=!1,h=c.isUndefinedOrNull(b.restoreWindow)?!1:!b.restoreWindow,i=c.getObjectFromObjectArray(H,"address",b.address);w(!1),c.isUndefinedOrNull(i)||C.isAddTab(b.address)||C.getActiveTabAddress()===b.address||(G.setCaption(b.label),G.setCaptionTitle(b.label),u(b,b.isMuc),G.getIsMinimized()&&h||x(b.address),C.setActiveTab(b.address,G.getIsMinimized()),c.getObjectFromObjectArray(H,"address",b.address).type===n.OneOnOne&&b.presence===o.Offline?B.disableMessageArea():B.enableMessageArea(),B.showMessageHistory(b.messages,h),B.clearMessageTextBox(),B.clearTypingNotification(),e=!0),G.getIsVisible()||(G.show(),f.positionWindows()),c.isUndefinedOrNull(i)||!G.getIsMinimized()||h||(x(b.address),G.restoreWindow(function(){B.setFocusToMessageTextBox(!h)}),f.positionWindows()),e&&B.setFocusToMessageTextBox(!h);break;case q.RenderOperations.UpdateConversationPresence:var i=c.getObjectFromObjectArray(H,"address",b.address);c.isUndefinedOrNull(i)||(C.updateTabPresence(b.address,b.presence),c.getObjectFromObjectArray(H,"address",b.address).type===n.OneOnOne&&C.getActiveTabAddress()===b.address&&b.presence===o.Offline?B.disableMessageArea():B.enableMessageArea());break;case q.RenderOperations.UpdateConversationAvatar:C.updateTabAvatar(b.address,b.avatarUrl);break;case q.RenderOperations.UpdateContactList:var k=a.extend({contextId:C.getActiveTabAddress(),friendshipStatusEnum:j.friendshipStatusEnum},b);u(k),v(k);break;case q.RenderOperations.AddUserToConversation:u(a.extend({contextId:C.getActiveTabAddress()},b));break;case q.RenderOperations.RemoveUserFromConversation:u(a.extend({contextId:C.getActiveTabAddress()},b))}}function s(){return f.getWindow(d).get$FirstFocusableTitlebarElement()}function u(a,b){c.isUndefinedOrNull(b)||(G.get$CaptionElement().toggle(!b),A.toggleVisibility(b)),A.getIsVisible()&&(A.setCaption(G.getCaption()),A.setCaptionTitle(G.getCaptionTitle()),A.render(a))}function v(a){E.invoke(a)}function w(a){z.toggleVisibility(!a),D.toggleVisibility(a),B.toggleVisibility(!a)}function x(a,b){var d=c.getObjectFromObjectArray(H,"address",a);c.isUndefinedOrNull(d)||(c.isUndefinedOrNull(b)?d.unreadMessageCount=0:d.unreadMessageCount+=b,C.updateTabUnreadMessageCount(a,d.unreadMessageCount)),q.handleViewAction(q.Actions.UnreadMessageCountChanged,{address:a,unreadMessageCount:d.unreadMessageCount}),y()}function y(){q.handleViewAction(q.Actions.UnreadMessageCountChanged,{address:null,unreadMessageCount:b.reduce(b.pluck(H,"unreadMessageCount"),function(a,b){return a+b},0)})}var z,A,B,C,D,E,F="chatwidgetfactory",G=this,H=[];this.windowCreated(function(){z=G.getControl(t.inviteButton.controlId),A=G.getControl(t.groupButton.controlId),B=G.getControl(t.messageArea.controlId),C=G.getControl(t.chatTabs.controlId),D=G.getControl(t.contactInvitationList.controlId),E=new c.Throttle(G,250,function(a){D.render(a)}),z.clicked(function(){q.handleViewAction(q.Actions.InvitationRequested,{address:C.getActiveTabAddress()})}),A.contactClicked(function(a){q.handleViewAction(q.Actions.ChatRequested,a)}),A.addFriend(function(a){q.handleViewAction(q.Actions.AddFriend,a)}),C.tabSelected(function(a){q.handleViewAction(q.Actions.ConversationSelected,{address:a.address}),i.publishEvent(h.ConversationSelected,F,{conversationCount:H.length})}),C.addTabSelected(function(a){q.handleViewAction(q.Actions.InvitationRequested,{address:a.address})}),B.userStartedMessage(function(){q.handleViewAction(q.Actions.UserStartedMessage,{address:C.getActiveTabAddress()})}),B.userClearedMessage(function(){q.handleViewAction(q.Actions.UserClearedMessage,{address:C.getActiveTabAddress()})}),B.userEnteredMessage(function(a){q.handleViewAction(q.Actions.UserEnteredMessage,{address:C.getActiveTabAddress(),message:a.message})}),D.inviteesInvited(function(a){var b=C.getActiveTabAddress();q.handleViewAction(q.Actions.AddUsersToConversationRequested,{address:b,participants:a})}),D.inviteesCleared(function(){q.handleViewAction(q.Actions.InvitationCancelled,{address:C.getActiveTabAddress()})}),G.beforeHide(function(a){var b;if(!c.isUndefinedOrNull(a)&&a.hideAll)return H.length=0,C.removeTabs(),!1;if(!c.isUndefinedOrNull(a)&&a.invalidated)return(b=C.getTabCount())>1&&a.address===C.getActiveTabAddress()&&q.handleViewAction(q.Actions.ConversationSelected,{address:H[0].address}),b>1;if((b=C.getTabCount())>0){if(C.getIsAddTabActive())return q.handleViewAction(q.Actions.ConversationSelected,{address:H[H.length-1].address}),!0;q.handleViewAction(q.Actions.UserClosedConversation,{address:C.getActiveTabAddress()})}return b>1}),G.restored(function(){v()})}),this.__calculateMinWidth=k,this.__calculateMinHeight=l,this.__get$focusInElement=s,this.init=e,this.render=r,q.registerView(d,G)}d.trace("PETs-Client-Contacts::ChatWidgetFactory::ctor");var t={main:{templateName:k.getTemplateNameFromPath(r.path)},inviteButton:{controlId:"aes-chat-invite-button"},groupButton:{controlId:"aes-chat-group-button"},chatTabs:{controlId:"aes-chat-tabsection"},messageArea:{controlId:"aes-chat-chatmessagearea"},contactInvitationList:{controlId:"aes-chat-contact-invitation-list"},groupChatUsersList:{controlId:"aes-group-chat-users-list"}};return{create:function(a,b){return b.$parentElement=b.$parseElement,b.windowTemplate=t.main.templateName,e.extend(s,a,b)}}});

define("pets-client-chat/1.10.0/public/javascript/contactlistcontrol", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/userinfo","pets-client-core/2.6.0/public/javascript/lightweightwindowbase","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-core/2.6.0/public/javascript/petsconfig!pets","pets-client-core/2.6.0/public/javascript/petsconfig!stringresources","pets-client-core/2.6.0/public/javascript/cacheproxy","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-core/2.6.0/public/javascript/analyticseventsenum","pets-client-core/2.6.0/public/javascript/analytics","pets-client-chat/1.10.0/public/javascript/chatapi","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/partialsClient/contacts/contactlist.compiled"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(e,o){function p(d,e,g){c.trace("PETs-Client-Contacts::ContactsListControl::render"),b.isUndefinedOrNull(e)&&(e=s.UpdateContacts),b.isUndefinedOrNull(d.contextId)&&(d.contextId=""),H(d.contextId,function(c){var h;e===s.ApplySearchFilter?c.searchFilterText!==d.searchFilterText&&(c.searchFilterText=d.searchFilterText,I(d.contextId,c)):e===s.ApplyGroupFilter&&c.groupFilterText!==d.groupFilterText&&(c.groupFilterText=d.groupFilterText,c.groupFilterDisplayText=d.groupFilterDisplayText,I(d.contextId,c)),h=C(d,c),N(h,c),O(h,c),P(h,c),a.isArray(h.contactGroups)&&(L(h.contactGroups,c),h.contactGroups.sort(R)),a.isArray(h.contacts)&&(M(h.contacts,c),h.contacts.sort(S),(h.inviteeJids||h.participantJids)&&(h.contacts=a.map(h.contacts,function(b){return b.invitationFilteredOut=-1!==a.inArray(b.jid,h.inviteeJids)||-1!==a.inArray(b.jid,h.participantJids),b}))),b.isUndefinedOrNull(d)||b.isUndefinedOrNull(h.contacts)||(h.groupContacts=a.grep(h.contacts,function(a){return!a.searchFilteredOut&&!a.groupFilteredOut}),h.allContacts=a.grep(h.contacts,function(a){return!a.searchFilteredOut&&a.groupFilteredOut})),f.replaceContentFromTemplate(U.get$ClientAreaRootElement(),r.main.templateName,h,function(){h.options&&h.options.selectOnly&&T.find(r.main.firstSelectableContact).focus(),b.doCallback(g)})})}function u(c,d){var e,f=B();H(f,function(g){b.isUndefinedOrNull(c)&&!d?(g.selectedJids=[],I(f,g)):(a.isArray(g.selectedJids)||(g.selectedJids=[]),e=a.inArray(c,g.selectedJids),d&&-1===e?(g.selectedJids.push(c),I(f,g)):!d&&e>-1&&(g.selectedJids.splice(e,1),I(f,g)))})}function v(){return W[A(B())].selectedJids}function w(a){X.GroupClicked.push(a)}function x(a){X.ContactClicked.push(a)}function y(a){X.TeamClicked.push(a)}function z(a){X.AddFriend.push(a)}function A(a){return V+a}function B(){return T.find(r.main.listElementSelector).attr(r.main.contextIdAttribute)}function C(c,d){var f=a.extend(!0,{},c,d,{id:e,friendshipStatusEnum:j.friendshipStatusEnum,groupTypeEnum:m.GroupTypes});return f.options=a.extend(o,c.options),b.isUndefinedOrNull(f.config)&&(f.config={jive:g.jive,profile:g.profile}),b.isUndefinedOrNull(c.contactGroups)||(f.contactGroups=a.map(c.contactGroups,function(b){return a.extend(!0,{},b)}),L(f.contactGroups,d),f.contacts=a.map(c.contacts,function(c){var d=a.extend(!0,{},c);d.addFriend=g.jive.enabled&&-1===a.inArray(h.MY_FRIENDS_GROUP_NAME,c.groups),d.contactGroups=[];for(var e=0;e<d.groups.length;e++)d.contactGroups[e]=b.getObjectFromObjectArray(f.contactGroups,"name",d.groups[e]);return d}),M(f.contacts,d)),f}function D(a){for(var b=0,c=X.ContactClicked.length;c>b;b++)X.GroupClicked[b].call(U,{jids:a})}function E(a){for(var b=0,c=X.ContactClicked.length;c>b;b++)X.ContactClicked[b].call(U,{jid:a})}function F(a){for(var b=0,c=X.TeamClicked.length;c>b;b++)X.TeamClicked[b].call(U,{name:a})}function G(a){for(var b=0,c=X.AddFriend.length;c>b;b++)X.AddFriend[b].call(U,{jid:a})}function H(a,c){var d=A(a);b.isUndefinedOrNull(W[d])?i.getCache(t+e+"."+d).snapshot(function(f){b.isUndefinedOrNull(f)&&(f={viewId:e,contextId:a,searchFilterText:null,groupFilterText:"*",groupFilterDisplayText:h.ALL_CONTACTS_GROUP_NAME,contacts:{},contactGroups:{},selectedJids:[]}),W[d]=f,c(f)}):c(W[d])}function I(a,b){var c=A(a);W[c]=b,i.getCache(t+e+"."+c).set(b)}function J(c,d){var e=d.contacts[c.jid];return b.isUndefinedOrNull(e)&&(e={jid:c.jid,selected:!1,searchFilteredOut:!1,searchFilterMatchPreText:null,searchFilterMatchText:null,searchFilterMatchPostText:null,groupFilteredOut:!1},d.contacts[c.jid]=e),b.isUndefinedOrNull(d.selectedJids)||(e.selected=a.inArray(c.jid,d.selectedJids)>-1),e}function K(a,c){var d=c.contactGroups[a.name];return b.isUndefinedOrNull(d)&&(d={name:a.name,type:a.type,searchFilteredOut:!1,groupFilteredOut:!1,availableContactCount:0,availableContacts:null},c.contactGroups[a.name]=d),d}function L(b,c){for(var d=0,e=b.length;e>d;d++)a.extend(b[d],K(b[d],c))}function M(b,c){for(var d=0,e=b.length;e>d;d++)a.extend(b[d],J(b[d],c))}function N(a,c){var d,e,f,g,h,i,j={},k=a.contacts,l=a.contactGroups;if(!b.isUndefinedOrNull(k))for(var m=0,o=k.length;o>m;m++)if(d=k[m],!b.isUndefinedOrNull(d.presence)&&d.presence.current!==n.Offline){e=d.groups;for(var p=0,q=e.length;q>p;p++)b.isUndefinedOrNull(j[e[p]])&&(j[e[p]]=[]),j[e[p]].push(d.jid)}if(!b.isUndefinedOrNull(l))for(var m=0,o=l.length;o>m;m++)f=l[m],i=j[f.name],b.isUndefinedOrNull(i)?(h=0,i=null):(h=i.length,i=i.join(",")),g=K(f,c),g.availableContactCount=h,g.availableContacts=i;I(c)}function O(b,c){for(var d,e,f,g=b.contacts,h=b.contactGroups,i=[],j=0,k=g.length;k>j;j++)Q(g[j],c).searchFilteredOut||i.push.apply(i,g[j].groups);for(j=0,k=h.length;k>j;j++)e=h[j],f=K(e,c),d=-1===a.inArray(e.name,i),f.searchFilteredOut=d;I(c)}function P(b,c){for(var d,e,f,g,h=c.groupFilterText,i="*"===h,j=b.contacts,k=b.contactGroups,l=0,m=j.length;m>l;l++)e=j[l],f=J(e,c),d=!i&&-1===a.inArray(h,e.groups),f.groupFilteredOut=d;for(l=0,m=k.length;m>l;l++)g=K(k[l],c),d=!i&&k[l].name!==h,g.groupFilteredOut=d;I(c)}function Q(a,c){var d,e,f,g=c.searchFilterText,h=J(a,c);return g=b.isUndefinedOrNull(g)?"":g.toLowerCase(),d=0===g.length,e=a.name.toLowerCase().indexOf(g),f=!(d||e>-1),d||f?(h.searchFilterMatchPreText=null,h.searchFilterMatchText=null,h.searchFilterMatchPostText=null):(h.searchFilterMatchPreText=a.name.substr(0,e),h.searchFilterMatchText=a.name.substr(e,g.length),h.searchFilterMatchPostText=a.name.substr(e+g.length)),h.searchFilteredOut=f,c.contacts[a.jid]}function R(a,b){var c=a.type,d=b.type;return c!==d?d>c?1:c>d?-1:0:a.name>b.name?1:a.name<b.name?-1:0}function S(a,b){var c;if(a.presence.current===b.presence.current)return a.name>b.name?1:a.name<b.name?-1:0;switch(a.presence.current){case n.Unknown:case n.Offline:c=1;break;case n.ExtendedAway:c=b.presence.current===n.Unknown||b.presence.current===n.Offline?-1:1;break;case n.Away:c=b.presence.current===n.Unknown||b.presence.current===n.Offline||b.presence.current===n.ExtendedAway?-1:1;break;case n.DoNotDisturb:c=b.presence.current===n.Unknown||b.presence.current===n.Offline||b.presence.current===n.ExtendedAway||b.presence.current===n.Away?-1:1;break;case n.Available:c=-1}return c}var T,U=this,V=d.getPetsId(),W={},X={GroupClicked:[],ContactClicked:[],TeamClicked:[],AddFriend:[]};this.windowCreated(function(){c.trace("PETs-Client-Contacts::ContactsListControl::windowCreated"),T=U.get$ClientAreaRootElement(),T.on("click",r.availableGroupList.optionSelector,function(){D(a(this).attr(r.availableGroupList.optionIdAttr).split(","))}),T.on("click",r.main.contactSelector,function(b){var c=a(this),d=a(b.target),f=c.attr(r.main.contactJid);d.hasClass(r.main.addFriendClassName)?(d.toggleClass(r.main.addFriendClassName),d.toggleClass(r.main.addedFriendClassName),G(f),l.publishEvent(k.FriendRequest,q,{controlId:e,parentId:U.getParentWindow().getId()})):d.hasClass(r.main.selectClassName)?u(f,d.is(":checked")):d.hasClass(r.main.teamClassName)?F(d.attr(r.main.teamNameAttribute)):c.hasClass(r.main.contactDisabledClassName)||d.hasClass(r.main.addedFriendClassName)||E(f)}),T.on("click",r.main.contactProfileSelector,function(a){a.stopPropagation()})}),this.RenderOperations=s,this.groupClicked=w,this.contactClicked=x,this.teamClicked=y,this.addFriend=z,this.render=p,this.updateSelectedJids=u,this.getSelectedJids=v}var q="contactlistcontrol",r={main:{templateName:f.getTemplateNameFromPath(o.path),listElementSelector:".aes-contacts-list",contextIdAttribute:"data-contextid",contactSelector:".aes-user",contactProfileSelector:"a.aes-profile",contactDisabledClassName:"aes-user-disabled",contactJid:"data-address",selectClassName:"user-select",addFriendClassName:"aes-add-friend",addedFriendClassName:"aes-added-friend",teamClassName:"aes-team",teamNameAttribute:"data-address",firstSelectableContact:".aes-user input.user-select:not([readonly]):not([checked]):first"},availableGroupList:{optionSelector:".aes-group-clickable",optionIdAttr:"data-address"}},s={UpdateContacts:0,UpdatePresence:1,ApplySearchFilter:2,ApplyGroupFilter:3},t="contactlistcontrol.viewstates.";return{create:function(a,c){c.template=r.main.templateName,b.isUndefinedOrNull(c.clickOnlyWhenAvailable)&&(c.clickOnlyWhenAvailable=b.isUndefinedOrNull(c.parentOptions.clickOnlyWhenAvailable)?!1:c.parentOptions.clickOnlyWhenAvailable),b.isUndefinedOrNull(c.showAvailableGroups)&&(c.showAvailableGroups=b.isUndefinedOrNull(c.parentOptions.showAvailableGroups)?!1:c.parentOptions.showAvailableGroups),b.isUndefinedOrNull(c.selectOnly)&&(c.selectOnly=b.isUndefinedOrNull(c.parentOptions.selectOnly)?!1:c.parentOptions.selectOnly),b.isUndefinedOrNull(c.selectOnlyWhenAvailable)&&(c.selectOnlyWhenAvailable=b.isUndefinedOrNull(c.parentOptions.selectOnlyWhenAvailable)?!1:c.parentOptions.selectOnlyWhenAvailable);var d=e.extend(p,arguments,a,c);return d.load(),d}}});

define("pets-client-chat/1.10.0/public/javascript/contactswidgettemplates", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/templatemanager","pets-client-chat/1.10.0/public/javascript/connectionstatusenum","pets-client-chat/1.10.0/public/partialsClient/contacts/contacts.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/error.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.compiled","pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.compiled"],function(a,b,c,d,e,f){function g(a,c,e,f){b.trace("PETs-Client-Contacts::contactsWidgetTemplates::renderPartial"),d.replaceFromTemplate(a.find(c.selector),c.templateName,e,f)}function h(a){b.trace("PETs-Client-Contacts::contactsWidgetTemplates::getErrorTemplateMetadata");var d=c.isUndefinedOrNull(a)||c.isUndefinedOrNull(a.code)?"Unknown":c.getObjPropNameByValue(e,a.code);return o.error[d]}function i(c){return b.trace("PETs-Client-Contacts::contactsWidgetTemplates::getErrorClickCallbackAction"),a(c.target).attr(o.error.clickCallback.actionIdAttr)}function j(c,d){b.trace("PETs-Client-Contacts::contactsWidgetTemplates::messageAction"),c.on("click",o.message.actionSelector,function(){d(a(this).attr(o.message.actionIdAttr))})}function k(c,d){b.trace("PETs-Client-Contacts::contactsWidgetTemplates::setupHandlers"),c.on("click",".aes-selection",function(){a(this).toggleClass("aes-selected")}),c.on("click",o.error.selector,d)}function l(a,c,d){b.trace("Pets-Client-Contacts::contactsWidgetTemplates::refresh"),g(a,o.message,c,d)}function m(a,c,e){b.trace("Pets-Client-Contacts::contactsWidgetTemplates::showError"),d.replaceFromTemplate(a.find(o.error.selector),h(c).templateName,c,e)}function n(a,c){b.trace("Pets-Client-Contacts::contactsWidgetTemplates::clearError"),d.replaceFromTemplate(a.find(o.error.selector),h().templateName,{},c)}var o={main:{templateName:d.getTemplateNameFromPath(f.path)},presence:{controlId:"aes-contacts-presence"},message:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/message.template",selector:".aes-contacts-message-info",actionSelector:"#aes-contacts-message-action",actionIdAttr:"data-address",connectActionId:"connect"},contactFilteredList:{controlId:"aes-contacts-filtered-list",groupListSelector:".aes-group-module",contactListSelector:".aes-contacts .aes-list"},contactsFooterControl:{controlId:"aes-contacts-footer",selector:".aes-contacts > footer"},error:{selector:".aes-contacts-message-error",clickCallback:{actionIdAttr:"data-address",connectActionId:"connect"},Unknown:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/error.template"},ConnectionFailed:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/errorconnectionfailed.template"},AuthenticationFailed:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/errorauthenticationfailed.template"},Disconnected:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/errordisconnected.template"},Error:{templateName:"pets-client-chat/1.10.0/public/partialsClient/contacts/errorerror.template"}}};return{refresh:l,showError:m,clearError:n,Templates:o,getErrorTemplateMetadata:h,getErrorClickCallbackAction:i,setupHandlers:k,messageAction:j}});

define("pets-client-chat/1.10.0/public/javascript/contactswidgetfactory", ["ncf-thirdparty/jquery-1.7.1/public/javascript/jquery","pets-client-core/2.6.0/public/javascript/utility","pets-client-core/2.6.0/public/javascript/logger","pets-client-core/2.6.0/public/javascript/widgetbase","pets-client-core/2.6.0/public/javascript/windowmanager","pets-client-core/2.6.0/public/javascript/cdsapi","pets-client-chat/1.10.0/public/javascript/connectionerrorconditionenum","pets-client-chat/1.10.0/public/javascript/presenceenum","pets-client-chat/1.10.0/public/javascript/contactswidgettemplates","pets-client-chat/1.10.0/public/javascript/contactscontroller"],function(a,b,c,d,e,f,g,h,i,j){function k(d,k){function l(){c.trace("PETs-Client-Contacts::contactsWidget::init"),D.base.init(),e.getPetsDock().registerTitlebarControl(d,A),i.setupHandlers(z,v),i.messageAction(z,u),y||D.postLoaded()}function m(a){c.trace("Pets-Client-Contacts::contactsWidget::render");var d,e=b.isUndefinedOrNull(a.renderOperation)?j.RenderOperations.Normal:a.renderOperation,f=t(a),k=r(document.activeElement)?document.activeElement:null;switch(D.base.render(),e){case j.RenderOperations.Normal:A.render(f),E.invoke(f),s(k);break;case j.RenderOperations.UnreadMessages:D.postMessageIndication({text:0==f.unreadMessageCount||"0"==f.unreadMessageCount?"":f.unreadMessageCount});break;case j.RenderOperations.ConnectionError:d={code:f.connectionStatus,description:f.connectionStatusText,condition:f.connectionErrorCondition,clickCallback:v,conditionEnum:g,showMessage:!1},y=!0,D.postError(d),A.render({userPresence:h.Offline}),i.showError(z,d,function(){D.base.renderComplete(),w()}),s(k);break;case j.RenderOperations.ConnectionEstablished:A.render({userPresence:h.Available}),i.clearError(z,function(){D.base.renderComplete(),w()}),D.postLoaded(),s(k)}}function n(){A.focus()}function o(a){B.render(a,B.RenderOperations.UpdateContacts,function(){a.selectedGroupName=B.getGroupSelected(),C.render(a,function(){i.refresh(z,a,function(){D.base.renderComplete(),C.show(),w()})})})}function p(){b.isUndefinedOrNull(z)&&(z=D.get$ClientAreaRootElement()),b.isUndefinedOrNull(A)&&(A=q(i.Templates.presence.controlId)),b.isUndefinedOrNull(B)&&(B=q(i.Templates.contactFilteredList.controlId)),b.isUndefinedOrNull(C)&&(C=q(i.Templates.contactsFooterControl.controlId))}function q(a){return D.getControl(d+"-"+a)}function r(b){var c=!1;return a.contains(z[0],b)?c=!0:a.contains(A.get$ClientAreaRootElement()[0],b)?c=!0:a.contains(C.get$ClientAreaRootElement()[0],b)&&(c=!0),c}function s(b){b&&(r(b)?a(b).focus():setTimeout(function(){D.focus()},100))}function t(b){var c=a.extend(!0,b,{id:d,config:{},options:{clickOnlyWhenAvailable:k.clickOnlyWhenAvailable,showAvailableGroups:k.showAvailableGroups},friendshipStatusEnum:f.friendshipStatusEnum});return c}function u(a){switch(a){case i.Templates.message.connectActionId:j.handleViewAction(j.Actions.ConnectionRequested)}}function v(a){var b=i.getErrorClickCallbackAction(a);switch(b){case i.Templates.error.clickCallback.connectActionId:j.handleViewAction(j.Actions.ConnectionRequested)}}function w(){var a,c,d,e,f;p(),b.isUndefinedOrNull(B)||(a=D.getParentWindow(),d=z.find(i.Templates.error.selector).outerHeight(),e=z.find(i.Templates.message.selector).outerHeight(),f=C.getOuterSize().height,c=k.resizeToParentClientArea&&!b.isUndefinedOrNull(a)?D.getParentWindow().getClientAreaSize().height:D.getClientAreaSize().height,B.render({height:c-d-e-f},B.RenderOperations.Resize))}function x(){w()}var y,z,A,B,C,D=this,E=new b.Throttle(D,250,o);j.registerView(d,D),e.getPetsBar().registerIcon(d,this,k),this.windowCreated(function(){function b(b){return a.extend(!0,{widgetId:d},b)}p(),A.presenceSelected(function(a){a.presence==h.Available?j.handleViewAction(j.Actions.ConnectionRequested):a.presence==h.Offline&&j.handleViewAction(j.Actions.DisconnectionRequested)}),A.focusBefore(function(){D._postSynchronousEvent("focusBefore",{id:d})}),B.groupClicked(function(a){j.handleViewAction(j.Actions.GroupClicked,b(a))}),B.contactClicked(function(a){j.handleViewAction(j.Actions.ContactClicked,b(a))}),B.teamClicked(function(a){j.handleViewAction(j.Actions.TeamClicked,b(a))}),B.addFriend(function(a){j.handleViewAction(j.Actions.AddFriend,b(a))}),B.groupSelected(function(a){C.render({groupRefresh:!0,selectedGroupName:a.name})}),C.preferenceSelected(function(a){j.handleViewAction(j.Actions.PreferenceSelected,a)}),C.groupChatSelected(function(a){a.groupName=B.getGroupSelected(),j.handleViewAction(j.Actions.GroupChatRequested,a)}),y||D.postLoaded()}),this.resized(w),this.init=l,this.render=m,this.focus=n,this.__afterShown=x}return c.trace("PETs-Client-Contacts::contactsWidgetFactory::ctor"),{create:function(a,e){return c.trace("Pets-Client-Contacts::contactsWidgetFactory::create"),e.template=i.Templates.main.templateName,b.isUndefinedOrNull(e.clickOnlyWhenAvailable)&&(e.clickOnlyWhenAvailable=!1),b.isUndefinedOrNull(e.showAvailableGroups)&&(e.showAvailableGroups=!1),d.extend(k,a,e)}}});

define("pets-client-chat/1.10.0/public/javascript/controls-bundle.bundle", ["pets-client-chat/1.10.0/public/javascript/chatwidgetfactory","pets-client-chat/1.10.0/public/javascript/chatmessageareacontrol","pets-client-chat/1.10.0/public/javascript/chattabscontrol","pets-client-chat/1.10.0/public/javascript/invitebuttoncontrol","pets-client-chat/1.10.0/public/javascript/groupbuttoncontrol","pets-client-chat/1.10.0/public/javascript/groupchatuserslistcontrol","pets-client-chat/1.10.0/public/javascript/contactswidgetfactory","pets-client-chat/1.10.0/public/javascript/contactfilteredlistcontrol","pets-client-chat/1.10.0/public/javascript/contactgroupscontrol","pets-client-chat/1.10.0/public/javascript/contactinvitationlistcontrol","pets-client-chat/1.10.0/public/javascript/contactlistcontrol","pets-client-chat/1.10.0/public/javascript/contactsfiltercontrol","pets-client-chat/1.10.0/public/javascript/contactsfootercontrol","pets-client-chat/1.10.0/public/javascript/contactwidgetfactory","pets-client-chat/1.10.0/public/javascript/groupselectioncontrol","pets-client-chat/1.10.0/public/javascript/presencecontrol","pets-client-chat/1.10.0/public/javascript/presenceoptionscontrol","pets-client-chat/1.10.0/public/javascript/statusmessagewidgetfactory","pets-client-chat/1.10.0/public/javascript/statusmessagecontrol"],function(){});

define("pets-client-chat/1.10.0/public/javascript/controls-bundle", ["pets-client-chat/1.10.0/public/javascript/controls-bundle.bundle"], function(temp){
  return temp;
});

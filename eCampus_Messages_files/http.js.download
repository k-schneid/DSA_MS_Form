define([],function(){var a=document.createElement("a");return{fetchPromise:function(b,c){var d=c||{};d.headers=d.headers||{},a.href=b,d.responseType=d.responseType,"undefined"==typeof d.responseType&&(d.responseType=/\.json$/.test(a.pathname)?"json":""),"json"===d.responseType&&(d.headers.Accept="application/json");var e=new Promise(function(a,c){var e;try{e=new XMLHttpRequest;var f=function(){var b;if(e.readyState===e.DONE)if(/2\d\d/.test(e.status))if(b=e.response||e.responseText,"json"===d.responseType&&"string"==typeof b){var f;try{f=JSON.parse(b)}catch(g){return void c(g)}a(f)}else a(b);else c(e)};e.open(d.method||"GET",b);for(var g in d.headers)e.setRequestHeader(g,d.headers[g]);e.withCredentials=d.withCredentials||!1,e.responseType="json"===d.responseType?"text":d.responseType,e.timeout=d.timeout||1e4,e.onreadystatechange=f,e.send(d.data)}catch(h){c(e,h)}});return e}}});